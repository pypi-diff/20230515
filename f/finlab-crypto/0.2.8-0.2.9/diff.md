# Comparing `tmp/finlab_crypto-0.2.8-py3-none-any.whl.zip` & `tmp/finlab_crypto-0.2.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,18 +1,17 @@
-Zip file size: 43802 bytes, number of entries: 16
--rw-r--r--  2.0 unx     1775 b- defN 21-Mar-02 15:15 finlab_crypto/__init__.py
--rw-r--r--  2.0 unx    10222 b- defN 20-Nov-27 00:22 finlab_crypto/chart.py
--rw-r--r--  2.0 unx     9243 b- defN 20-Dec-03 23:57 finlab_crypto/crawler.py
--rw-r--r--  2.0 unx     1880 b- defN 20-Oct-31 11:33 finlab_crypto/indicators.py
--rw-r--r--  2.0 unx    31596 b- defN 21-Mar-02 13:47 finlab_crypto/online.py
--rw-r--r--  2.0 unx     4574 b- defN 20-Nov-08 14:24 finlab_crypto/online_test.py
--rw-r--r--  2.0 unx     5873 b- defN 20-Nov-27 00:22 finlab_crypto/overfitting.py
--rw-r--r--  2.0 unx    13489 b- defN 21-Jan-10 01:05 finlab_crypto/strategy.py
--rw-r--r--  2.0 unx     1803 b- defN 20-Nov-27 00:52 finlab_crypto/talib_filter.py
--rw-r--r--  2.0 unx     2016 b- defN 20-Nov-27 00:52 finlab_crypto/talib_strategy.py
--rw-r--r--  2.0 unx    10267 b- defN 21-Jan-10 00:52 finlab_crypto/utility.py
--rw-r--r--  2.0 unx    34916 b- defN 21-Mar-02 15:18 finlab_crypto-0.2.8.dist-info/LICENSE
--rw-r--r--  2.0 unx     8115 b- defN 21-Mar-02 15:18 finlab_crypto-0.2.8.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 21-Mar-02 15:18 finlab_crypto-0.2.8.dist-info/WHEEL
--rw-r--r--  2.0 unx       14 b- defN 21-Mar-02 15:18 finlab_crypto-0.2.8.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1334 b- defN 21-Mar-02 15:18 finlab_crypto-0.2.8.dist-info/RECORD
-16 files, 137209 bytes uncompressed, 41614 bytes compressed:  69.7%
+Zip file size: 42348 bytes, number of entries: 15
+-rw-r--r--  2.0 unx     1775 b- defN 21-May-19 11:18 finlab_crypto/__init__.py
+-rw-r--r--  2.0 unx    10222 b- defN 21-May-19 11:17 finlab_crypto/chart.py
+-rw-r--r--  2.0 unx     9243 b- defN 21-May-19 11:17 finlab_crypto/crawler.py
+-rw-r--r--  2.0 unx     1880 b- defN 21-May-19 11:17 finlab_crypto/indicators.py
+-rw-r--r--  2.0 unx    31706 b- defN 21-May-19 11:18 finlab_crypto/online.py
+-rw-r--r--  2.0 unx     5955 b- defN 21-May-19 11:17 finlab_crypto/overfitting.py
+-rw-r--r--  2.0 unx    13489 b- defN 21-May-19 11:17 finlab_crypto/strategy.py
+-rw-r--r--  2.0 unx     1977 b- defN 21-May-19 11:17 finlab_crypto/talib_filter.py
+-rw-r--r--  2.0 unx     2016 b- defN 21-May-19 11:17 finlab_crypto/talib_strategy.py
+-rw-r--r--  2.0 unx    10267 b- defN 21-May-19 11:17 finlab_crypto/utility.py
+-rw-r--r--  2.0 unx    34916 b- defN 21-May-19 11:20 finlab_crypto-0.2.9.dist-info/LICENSE
+-rw-r--r--  2.0 unx     8209 b- defN 21-May-19 11:20 finlab_crypto-0.2.9.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 21-May-19 11:20 finlab_crypto-0.2.9.dist-info/WHEEL
+-rw-r--r--  2.0 unx       14 b- defN 21-May-19 11:20 finlab_crypto-0.2.9.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1249 b- defN 21-May-19 11:20 finlab_crypto-0.2.9.dist-info/RECORD
+15 files, 133010 bytes uncompressed, 40292 bytes compressed:  69.7%
```

## zipnote {}

```diff
@@ -9,17 +9,14 @@
 
 Filename: finlab_crypto/indicators.py
 Comment: 
 
 Filename: finlab_crypto/online.py
 Comment: 
 
-Filename: finlab_crypto/online_test.py
-Comment: 
-
 Filename: finlab_crypto/overfitting.py
 Comment: 
 
 Filename: finlab_crypto/strategy.py
 Comment: 
 
 Filename: finlab_crypto/talib_filter.py
@@ -27,23 +24,23 @@
 
 Filename: finlab_crypto/talib_strategy.py
 Comment: 
 
 Filename: finlab_crypto/utility.py
 Comment: 
 
-Filename: finlab_crypto-0.2.8.dist-info/LICENSE
+Filename: finlab_crypto-0.2.9.dist-info/LICENSE
 Comment: 
 
-Filename: finlab_crypto-0.2.8.dist-info/METADATA
+Filename: finlab_crypto-0.2.9.dist-info/METADATA
 Comment: 
 
-Filename: finlab_crypto-0.2.8.dist-info/WHEEL
+Filename: finlab_crypto-0.2.9.dist-info/WHEEL
 Comment: 
 
-Filename: finlab_crypto-0.2.8.dist-info/top_level.txt
+Filename: finlab_crypto-0.2.9.dist-info/top_level.txt
 Comment: 
 
-Filename: finlab_crypto-0.2.8.dist-info/RECORD
+Filename: finlab_crypto-0.2.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## finlab_crypto/__init__.py

```diff
@@ -4,15 +4,15 @@
 from .strategy import Strategy
 from .strategy import Filter
 
 import vectorbt as vbt
 import sys
 import os
 
-__version__ = '0.2.8'
+__version__ = '0.2.9'
 
 
 # set default fees and slippage
 vbt.defaults.portfolio['init_cash'] = 100.0 # in $
 vbt.defaults.portfolio['fees'] = 0.001       # in %
 vbt.defaults.portfolio['slippage'] = 0.001  # in %
```

## finlab_crypto/online.py

```diff
@@ -91,23 +91,24 @@
         strategy: A function that is your customized strategy (ex:trend_strategy).
         variables: A dict of your customized strategy attributes (ex:dict(name='sma',n1=30,n2=130,),).
         weight_btc: A float of btc for each commodity operation (ex: 0.2).
         filters: A dict that is your customized filter (ex:{}).
         name: A str of your trading method name (ex:'altcoin-trend-hullma').
 
     """
-    def __init__(self, symbols, freq, lookback, strategy, variables, weight_btc, filters=None, name=''):
+    def __init__(self, symbols, freq, lookback, strategy, variables, weight_btc, filters=None, name='', execution_price='close'):
         self.symbols = symbols
         self.freq = freq
         self.lookback = lookback
         self.strategy = strategy
         self.variables = variables
         self.weight_btc = weight_btc
         self.filters = filters
         self.name = name
+        self.execution_price=execution_price
 
 
 class TradingPortfolio():
     """Connect Binance account.
 
     The core class to connect Binance  with API, in order to connect account info,
     register strategt.
@@ -214,15 +215,15 @@
         for method in self._trading_methods:
             for symbol in method.symbols:
                 ohlcv = ohlcvs[(symbol, method.freq)]
                 htmlname = f'{symbol}-{method.freq}-{method.name}.html' if html else None
                 result = method.strategy.backtest(ohlcv,
                                                   method.variables, filters=method.filters, plot=html,
                                                   html=htmlname,
-                                                  freq=method.freq, fees=0., slippage=0.)
+                                                  freq=method.freq, fees=0., slippage=0., execution_price=method.execution_price)
 
                 signal = result.cash().iloc[-1] == 0
                 return_ = 0
 
                 # find weight_btc if it is in the nested dictionary
                 weight_btc = method.weight_btc
                 if isinstance(weight_btc, dict):
```

## finlab_crypto/overfitting.py

```diff
@@ -1,27 +1,30 @@
 from statsmodels.distributions.empirical_distribution import ECDF
 import itertools as itr
 import seaborn as sns
+
 import matplotlib.pyplot as plt
 import pandas as pd
 import numpy as np
+import datetime
 import math
 
+sharpe_ratio = lambda r: r.mean() / (r.std()+0.0000001) * (365 ** 0.5)
 
 class CSCV(object):
     """Combinatorially symmetric cross-validation algorithm.
 
     Calculate backtesting about overfitting probability distribution and performance degradation.
 
     Attributes:
         n_bins:A int of CSCV algorithm bin size to control overfitting calculation.Default is 10.
         objective:A function of in sample(is) and out of sample(oos) return benchmark algorithm.Default is lambda r:r.mean().
 
     """
-    def __init__(self, n_bins=10, objective=lambda r: r.mean()):
+    def __init__(self, n_bins=10, objective=sharpe_ratio):
         self.n_bins = n_bins
         self.objective = objective
         self.bins_enumeration = [set(x) for x in itr.combinations(np.arange(10), 10 // 2)]
 
         self.Rs = [pd.Series(dtype=float) for i in range(len(self.bins_enumeration))]
         self.R_bars = [pd.Series(dtype=float) for i in range(len(self.bins_enumeration))]
```

## finlab_crypto/talib_filter.py

```diff
@@ -34,19 +34,23 @@
             o = ff(ohlcv.close, **parameters)
             if isinstance(o, list) or isinstance(o, tuple):
                 o = pd.DataFrame(np.array(o).T, index=ohlcv.index, columns=f.output_names)
 
         if isinstance(o, np.ndarray):
             o = pd.Series(o, index=ohlcv.index)
 
-        ret.condition
         if len(inspect.getargspec(ret.condition)[0]) == 2:
             signals = ret.condition(ohlcv, o)
         else:
-            signals = ret.condition(ohlcv, o, ret.additional_parameters)
+          try:
+            parameters = ({pn: (getattr(ret, pn)) for pn, val in additional_parameters.items()})            
+          except:
+            parameters = additional_parameters
+                       
+          signals = ret.condition(ohlcv, o, parameters)
 
         figures = {}
         group = 'overlaps' if f.info['group'] == 'Overlap Studies' else 'figures'
         figures[group] = {f.info['name']: o}
 
         return signals, figures
     return ret
```

## Comparing `finlab_crypto-0.2.8.dist-info/LICENSE` & `finlab_crypto-0.2.9.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `finlab_crypto-0.2.8.dist-info/METADATA` & `finlab_crypto-0.2.9.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: finlab-crypto
-Version: 0.2.8
+Version: 0.2.9
 Summary: A backtesting framework for crytpo currency
 Home-page: UNKNOWN
 Author: FinLab
 Author-email: finlabstaff@gmail.com
 License: UNKNOWN
 Platform: UNKNOWN
 Classifier: Programming Language :: Python :: 3
@@ -101,14 +101,19 @@
 cd finlab_crypto
 pip install requirements.txt
 pip install coverage
 BINANCE_KEY=<<YOUR_BINANCE_KEY>> BINANCE_SECRET=<<YOUR_BINANCE_SECRET>> coverage run -m unittest discover --pattern *_test.py
 ```
 
 ## Updates
+Version 0.2.9
+* add execution_price to TradingMethod
+* talib variables enumeration
+* fix #15
+
 Version 0.2.8
 * merge transactions to reduce fees
 
 Version 0.2.7
 * fix test error (request binance api too fast)
 * add USDC as base stable coin (tp.set_default_stable_coin('USDC'))
```

