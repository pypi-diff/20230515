# Comparing `tmp/limes_x-1.1.4-py3-none-any.whl.zip` & `tmp/limes_x-1.1.5-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,28 +1,28 @@
-Zip file size: 41016 bytes, number of entries: 26
+Zip file size: 41021 bytes, number of entries: 26
 -rw-rw-r--  2.0 unx      243 b- defN 23-May-05 17:54 limes_x/__init__.py
 -rw-rw-r--  2.0 unx       61 b- defN 23-May-05 17:54 limes_x/__main__.py
 -rw-rw-r--  2.0 unx     2971 b- defN 23-May-11 21:52 limes_x/cli.py
 -rw-rw-r--  2.0 unx     2864 b- defN 23-Apr-19 01:42 limes_x/telemetry.py
--rw-rw-r--  2.0 unx        5 b- defN 23-May-11 21:52 limes_x/version.txt
--rw-rw-r--  2.0 unx    38900 b- defN 23-May-06 05:54 limes_x/workflow.py
+-rw-rw-r--  2.0 unx        5 b- defN 23-May-15 06:44 limes_x/version.txt
+-rw-rw-r--  2.0 unx    39022 b- defN 23-May-15 06:40 limes_x/workflow.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Apr-19 01:42 limes_x/common/__init__.py
 -rw-rw-r--  2.0 unx     8220 b- defN 23-May-06 08:13 limes_x/common/utils.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Apr-19 01:42 limes_x/environments/__init__.py
 -rw-rw-r--  2.0 unx     1202 b- defN 23-Apr-19 01:42 limes_x/environments/_setup.py
 -rw-rw-r--  2.0 unx     6151 b- defN 23-May-01 01:12 limes_x/environments/hpc.py
--rw-rw-r--  2.0 unx     3654 b- defN 23-Apr-19 01:42 limes_x/environments/local.py
+-rw-rw-r--  2.0 unx     3674 b- defN 23-May-11 23:01 limes_x/environments/local.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Apr-19 01:42 limes_x/execution/__init__.py
 -rw-rw-r--  2.0 unx     2814 b- defN 23-Apr-19 01:42 limes_x/execution/comms.py
--rw-rw-r--  2.0 unx     9506 b- defN 23-Apr-29 08:02 limes_x/execution/executors.py
+-rw-rw-r--  2.0 unx     9432 b- defN 23-May-11 22:55 limes_x/execution/executors.py
 -rw-rw-r--  2.0 unx     5105 b- defN 23-Apr-19 01:42 limes_x/execution/instances.py
--rw-rw-r--  2.0 unx    14052 b- defN 23-Apr-19 01:42 limes_x/execution/modules.py
+-rw-rw-r--  2.0 unx    13994 b- defN 23-May-11 23:00 limes_x/execution/modules.py
 -rw-rw-r--  2.0 unx     4419 b- defN 23-Apr-19 01:42 limes_x/execution/solver.py
 -rw-rw-r--  2.0 unx      677 b- defN 23-Apr-19 01:42 limes_x/execution/template_module_definition.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-May-05 23:55 limes_x/presets/__init__.py
 -rw-rw-r--  2.0 unx     9136 b- defN 23-May-07 01:27 limes_x/presets/slurm.py
--rw-rw-r--  2.0 unx     9991 b- defN 23-May-11 21:52 limes_x-1.1.4.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-May-11 21:52 limes_x-1.1.4.dist-info/WHEEL
--rw-rw-r--  2.0 unx       36 b- defN 23-May-11 21:52 limes_x-1.1.4.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx        8 b- defN 23-May-11 21:52 limes_x-1.1.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2117 b- defN 23-May-11 21:52 limes_x-1.1.4.dist-info/RECORD
-26 files, 122224 bytes uncompressed, 37592 bytes compressed:  69.2%
+-rw-rw-r--  2.0 unx     9991 b- defN 23-May-15 06:46 limes_x-1.1.5.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-May-15 06:46 limes_x-1.1.5.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       36 b- defN 23-May-15 06:46 limes_x-1.1.5.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx        8 b- defN 23-May-15 06:46 limes_x-1.1.5.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2117 b- defN 23-May-15 06:46 limes_x-1.1.5.dist-info/RECORD
+26 files, 122234 bytes uncompressed, 37597 bytes compressed:  69.2%
```

## zipnote {}

```diff
@@ -57,23 +57,23 @@
 
 Filename: limes_x/presets/__init__.py
 Comment: 
 
 Filename: limes_x/presets/slurm.py
 Comment: 
 
-Filename: limes_x-1.1.4.dist-info/METADATA
+Filename: limes_x-1.1.5.dist-info/METADATA
 Comment: 
 
-Filename: limes_x-1.1.4.dist-info/WHEEL
+Filename: limes_x-1.1.5.dist-info/WHEEL
 Comment: 
 
-Filename: limes_x-1.1.4.dist-info/entry_points.txt
+Filename: limes_x-1.1.5.dist-info/entry_points.txt
 Comment: 
 
-Filename: limes_x-1.1.4.dist-info/top_level.txt
+Filename: limes_x-1.1.5.dist-info/top_level.txt
 Comment: 
 
-Filename: limes_x-1.1.4.dist-info/RECORD
+Filename: limes_x-1.1.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## limes_x/version.txt

```diff
@@ -1 +1 @@
-1.1.4
+1.1.5
```

## limes_x/workflow.py

```diff
@@ -165,15 +165,15 @@
                 dependency_map=dict((k, set(v)) for k, v in serialized_state["parent_map"].items()),
                 _key=cls._initializer_key)
             state._completed_modules = serialized_state["completed_modules"]
             state._given_item_instances = serialized_state["given"]
             state._ids.update(item_instances)
             state._ids.update(job_instances)
             state._job_instances = job_instances
-            state._job_signatures = dict((state._get_signature(list(ji.inputs.values())), ji) for ji in job_instances.values())
+            state._job_signatures = dict((state._get_signature(ji.step.name, list(ji.inputs.values())), ji) for ji in job_instances.values())
             for k in serialized_state["pending_jobs"]:
                 ji = job_instances[k]
                 assert isinstance(ji, JobInstance)
                 state._pending_jobs[k] = ji
             state._item_instance_reservations = dict(
                 (item_instances[ik], {job_instances[rk] for rk in jids})
                 for ik, jids in serialized_state["item_instance_reservations"].items()
@@ -238,18 +238,18 @@
     def _gen_id(self, id_len: int):
         while True:
             id = uuid.uuid4().hex[:id_len]
             if id not in self._ids: break 
         self._ids.add(id)
         return id
 
-    def _get_signature(self, inputs: Iterable[ItemInstance|list[ItemInstance]]):
+    def _get_signature(self, module_name: str, inputs: Iterable[ItemInstance|list[ItemInstance]]):
         inputs_list = [ii for g in [g if isinstance(g, list) else [g] for g in inputs] for ii in g]
         input_keys = sorted(ii.GetID() for ii in inputs_list)
-        signature = "-".join(input_keys)
+        signature = "-".join([module_name]+input_keys)
         return signature
 
     def GetPendingJobs(self):
         return list(self._pending_jobs.values())        
 
     def _add_dependency_mapping(self, start: str, end: str):
         mapped = self._parent_map.get(start, set())
@@ -429,24 +429,25 @@
 
         for module in self._steps:
             if not _satisfies(module): continue
             instances = _gather_inputs(module)
             if instances is None: continue
             # print(f"{module.name} {len(instances)}")
             for space in instances:
-                signature = self._get_signature(list(space.values()))
+                signature = self._get_signature(module.name, list(space.values()))
+                print(signature)
                 if signature in self._job_signatures: continue
                 # print(module.name, space)
 
                 job_inst = JobInstance(self._gen_id, module, dict((k, _no_single_lists(v)) for k, v in space.items()))
                 self._register_job_instance(job_inst)
             self._changed = True
 
     def _register_job_instance(self, inst: JobInstance):
-        self._job_signatures[self._get_signature(inst.inputs.values())] = inst
+        self._job_signatures[self._get_signature(inst.step.name, inst.inputs.values())] = inst
         self._pending_jobs[inst.GetID()] = inst
         self._job_instances[inst.GetID()] = inst
         for ii in inst.ListInputInstances():
             lst = self._item_instance_reservations.get(ii, set())
             lst.add(inst)
             self._item_instance_reservations[ii] = lst
 
@@ -473,15 +474,15 @@
 
         item_instances_to_delete: list[ItemInstance] = []
         # remove job instances
         for ji in job_instances_to_delete:
             jk = ji.GetID()
             if jk in self._job_instances: del self._job_instances[jk]
             if jk in self._pending_jobs: del self._pending_jobs[jk]
-            sig = self._get_signature(list(ji.inputs.values()))
+            sig = self._get_signature(ji.step.name, list(ji.inputs.values()))
             if sig in self._job_signatures: del self._job_signatures[sig]
             outs = ji.ListOutputInstances()
             if outs is not None: item_instances_to_delete += outs
 
         # remove item instances
         for ii in item_instances_to_delete:
             if ii in self._given_item_instances: continue
```

## limes_x/environments/local.py

```diff
@@ -47,15 +47,15 @@
     CONTEXT.output_folder = RELATIVE_OUTPUT_PATH
 
     os.chdir(WORKSPACE)
     # monitor = ResourceMonitor(relative_output_path)
     result = None
     err = ""
     try:
-        sys.path = list(set([str(CONTEXT.ref)] + sys.path))
+        sys.path = list(set([str(CONTEXT.params.reference_folder)] + sys.path))
         result = THIS_MODULE._procedure(CONTEXT)
     except Exception as e:
         err = str(e)
     finally:
         # res_log = monitor.Stop()
         if result is None:
             result = JobResult()
```

## limes_x/execution/executors.py

```diff
@@ -24,15 +24,14 @@
         self.workspace = workspace
         self._verbose = True
 
         c = JobContext()
         c.job_id = self.instance.GetID()
         c.output_folder = Path(instance.GetFolderName())
         c.params = params.Copy()
-        c.ref = instance.step.location.joinpath(ComputeModule.LIB_FOLDER)
         c.manifest = dict((Item(k), [ii.value for ii in v] if isinstance(v, list) else v.value) for k, v in self.instance.inputs.items())
         if _save: c.Save(workspace)
         self.context = c
 
     def SaveContext(self):
         self.context.Save(self.workspace)
```

## limes_x/execution/modules.py

```diff
@@ -99,15 +99,14 @@
     __BL = {'shell', 'output_folder', 'ref'}
     shell_prefix: str
     params: Params
     shell: Callable[[str], int]
     output_folder: Path
     manifest: dict[Item, str|Path|list[str|Path]]
     job_id: str
-    ref: Path
 
     def __init__(self, **kwargs) -> None:
         super().__init__(**kwargs)
         if self.shell_prefix is None: self.shell_prefix = ""
 
     def Save(self, workspace: Path):
         folder = workspace.joinpath(self.output_folder)
@@ -140,15 +139,14 @@
                 if k in cls.__BL: continue
                 v: Any = d[k]
                 v = { # switch
                     'shell': lambda: None,
                     'params': lambda: Params.FromDict(v),
                     'manifest': lambda: _dict2manifest(v),
                     'output_folder': lambda: Path(v),
-                    'ref': lambda: Path(v),
                 }.get(k, lambda: str(v))()
                 kwargs[k] = v
             if 'output_folder' not in d:
                 kwargs['output_folder'] = output_folder
             return JobContext(**kwargs)
 
 class JobResult(AutoPopulate):
```

## Comparing `limes_x-1.1.4.dist-info/METADATA` & `limes_x-1.1.5.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: limes-x
-Version: 1.1.4
+Version: 1.1.5
 Summary: declarative workflow automation
 Home-page: https://github.com/hallamlab/limes-x
 Author: Tony Liu
 Author-email: contacttonyliu@gmail.com
 Project-URL: Bug Tracker, https://github.com/hallamlab/limes-x/issues
 Classifier: Programming Language :: Python :: 3
 Classifier: Operating System :: OS Independent
```

