# Comparing `tmp/autosend-0.0.2.win-amd64.zip` & `tmp/autosend-0.0.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,19 +1,9 @@
-Zip file size: 13145 bytes, number of entries: 17
-drwxrwxrwx  2.0 fat        0 b- stor 23-May-14 13:54 Program Files/
-drwxrwxrwx  2.0 fat        0 b- stor 23-May-14 13:54 Program Files/WindowsApps/
-drwxrwxrwx  2.0 fat        0 b- stor 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/
-drwxrwxrwx  2.0 fat        0 b- stor 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/
-drwxrwxrwx  2.0 fat        0 b- stor 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/
-drwxrwxrwx  2.0 fat        0 b- stor 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/
-drwxrwxrwx  2.0 fat        0 b- stor 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/
-drwxrwxrwx  2.0 fat        0 b- stor 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/__pycache__/
--rw-rw-rw-  2.0 fat     7106 b- defN 23-May-14 13:44 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/autosend.py
--rw-rw-rw-  2.0 fat       23 b- defN 23-May-14 12:55 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/__init__.py
--rw-rw-rw-  2.0 fat     6856 b- defN 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/__pycache__/autosend.cpython-39.pyc
--rw-rw-rw-  2.0 fat      247 b- defN 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/__pycache__/__init__.cpython-39.pyc
--rw-rw-rw-  2.0 fat        1 b- defN 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/dependency_links.txt
--rw-rw-rw-  2.0 fat     2337 b- defN 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/PKG-INFO
--rw-rw-rw-  2.0 fat        7 b- defN 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/requires.txt
--rw-rw-rw-  2.0 fat      227 b- defN 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/SOURCES.txt
--rw-rw-rw-  2.0 fat        9 b- defN 23-May-14 13:54 Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/top_level.txt
-17 files, 16813 bytes uncompressed, 7711 bytes compressed:  54.1%
+Zip file size: 6295 bytes, number of entries: 7
+-rw-rw-rw-  2.0 fat       23 b- defN 23-May-15 07:56 autosend/__init__.py
+-rw-rw-rw-  2.0 fat     8745 b- defN 23-May-15 10:29 autosend/autosend.py
+-rw-rw-rw-  2.0 fat     1055 b- defN 23-May-15 10:41 autosend-0.0.3.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     2388 b- defN 23-May-15 10:41 autosend-0.0.3.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-May-15 10:41 autosend-0.0.3.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        9 b- defN 23-May-15 10:41 autosend-0.0.3.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat      542 b- defN 23-May-15 10:41 autosend-0.0.3.dist-info/RECORD
+7 files, 12854 bytes uncompressed, 5333 bytes compressed:  58.5%
```

## zipnote {}

```diff
@@ -1,52 +1,22 @@
-Filename: Program Files/
+Filename: autosend/__init__.py
 Comment: 
 
-Filename: Program Files/WindowsApps/
+Filename: autosend/autosend.py
 Comment: 
 
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/
+Filename: autosend-0.0.3.dist-info/LICENSE
 Comment: 
 
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/
+Filename: autosend-0.0.3.dist-info/METADATA
 Comment: 
 
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/
+Filename: autosend-0.0.3.dist-info/WHEEL
 Comment: 
 
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/
+Filename: autosend-0.0.3.dist-info/top_level.txt
 Comment: 
 
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/
-Comment: 
-
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/__pycache__/
-Comment: 
-
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/autosend.py
-Comment: 
-
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/__init__.py
-Comment: 
-
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/__pycache__/autosend.cpython-39.pyc
-Comment: 
-
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/__pycache__/__init__.cpython-39.pyc
-Comment: 
-
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/dependency_links.txt
-Comment: 
-
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/PKG-INFO
-Comment: 
-
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/requires.txt
-Comment: 
-
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/SOURCES.txt
-Comment: 
-
-Filename: Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/top_level.txt
+Filename: autosend-0.0.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## filetype from file(1)

```diff
@@ -1 +1 @@
-Zip archive data, at least v2.0 to extract, compression method=store
+Zip archive data, at least v2.0 to extract, compression method=deflate
```

## Comparing `Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend/autosend.py` & `autosend/autosend.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,445 +1,547 @@
-00000000: 0d0a 696d 706f 7274 2073 7973 0d0a 696d  ..import sys..im
-00000010: 706f 7274 206f 730d 0a69 6d70 6f72 7420  port os..import 
-00000020: 7469 6d65 0d0a 696d 706f 7274 2074 7261  time..import tra
-00000030: 6365 6261 636b 0d0a 0d0a 696d 706f 7274  ceback....import
-00000040: 2079 616d 6c0d 0a69 6d70 6f72 7420 736d   yaml..import sm
-00000050: 7470 6c69 620d 0a66 726f 6d20 656d 6169  tplib..from emai
-00000060: 6c2e 6d69 6d65 2e74 6578 7420 696d 706f  l.mime.text impo
-00000070: 7274 204d 494d 4554 6578 740d 0a66 726f  rt MIMEText..fro
-00000080: 6d20 656d 6169 6c2e 6d69 6d65 2e6d 756c  m email.mime.mul
-00000090: 7469 7061 7274 2069 6d70 6f72 7420 4d49  tipart import MI
-000000a0: 4d45 4d75 6c74 6970 6172 740d 0a66 726f  MEMultipart..fro
-000000b0: 6d20 656d 6169 6c2e 6d69 6d65 2e61 7070  m email.mime.app
-000000c0: 6c69 6361 7469 6f6e 2069 6d70 6f72 7420  lication import 
-000000d0: 4d49 4d45 4170 706c 6963 6174 696f 6e0d  MIMEApplication.
-000000e0: 0a66 726f 6d20 696f 2069 6d70 6f72 7420  .from io import 
-000000f0: 5374 7269 6e67 494f 0d0a 696d 706f 7274  StringIO..import
-00000100: 2061 7465 7869 740d 0a66 726f 6d20 656d   atexit..from em
-00000110: 6169 6c2e 6765 6e65 7261 746f 7220 696d  ail.generator im
-00000120: 706f 7274 2047 656e 6572 6174 6f72 0d0a  port Generator..
-00000130: 0d0a 6578 616d 706c 655f 7961 6d6c 3d27  ..example_yaml='
-00000140: 2727 0d0a 0d0a 2320 203d 3d3d 3d3d 3d3d  ''....#  =======
-00000150: 3d3d 3d3d 2061 7574 6f73 656e 6420 7961  ==== autosend ya
-00000160: 6d6c 2074 656d 706c 6174 6520 3d3d 3d3d  ml template ====
-00000170: 3d3d 3d3d 3d3d 3d3d 0d0a 2320 7370 6563  ========..# spec
-00000180: 6966 7920 7468 6520 656d 6169 6c20 534d  ify the email SM
-00000190: 5450 2073 6572 7665 720d 0a75 7365 726e  TP server..usern
-000001a0: 616d 653a 2022 7573 6572 6e61 6d65 220d  ame: "username".
-000001b0: 0a70 6173 7377 6f72 643a 2022 7061 7373  .password: "pass
-000001c0: 776f 7264 220d 0a73 6572 7665 723a 2073  word"..server: s
-000001d0: 6d74 702e 6578 616d 706c 652e 636f 6d0d  mtp.example.com.
-000001e0: 0a70 6f72 743a 2032 350d 0a74 6c73 3a20  .port: 25..tls: 
-000001f0: 4661 6c73 650d 0a74 696d 656f 7574 3a20  False..timeout: 
-00000200: 3135 0d0a 0d0a 2320 7370 6563 6966 7920  15....# specify 
-00000210: 7468 6520 656d 6169 6c20 7375 626a 6563  the email subjec
-00000220: 7420 666f 726d 6174 2c20 7768 6572 6520  t format, where 
-00000230: 7b70 6174 687d 2069 6d70 6c69 6573 2074  {path} implies t
-00000240: 6865 2077 6f72 6b5f 6469 7220 7275 6e6e  he work_dir runn
-00000250: 696e 6720 7468 6520 7079 7468 6f6e 2073  ing the python s
-00000260: 6372 6970 742c 0d0a 2320 7b63 7572 7469  cript,..# {curti
-00000270: 6d65 7d20 696d 706c 6965 7320 7468 6520  me} implies the 
-00000280: 6375 7272 656e 7420 6461 7465 2061 6e64  current date and
-00000290: 2074 696d 652c 2061 6e64 207b 7374 6174   time, and {stat
-000002a0: 7573 7d20 6d61 7920 6265 2072 756e 6e69  us} may be runni
-000002b0: 6e67 206f 7220 636f 6d70 6c65 7465 200d  ng or complete .
-000002c0: 0a73 7562 6a65 6374 5f66 6f72 6d61 743a  .subject_format:
-000002d0: 2022 e380 90e7 aca6 e590 88e4 bf9d e5af   "..............
-000002e0: 86e8 a681 e6b1 82ef bc8c e58f afe5 9ca8  ................
-000002f0: e689 8be6 9cba e7ab afe6 9fa5 e998 85e3  ................
-00000300: 8091 7b70 6174 687d e697 a5e5 bf97 205b  ..{path}...... [
-00000310: 7b63 7572 7469 6d65 7d5d 205b 7b73 7461  {curtime}] [{sta
-00000320: 7475 737d 5d22 0d0a 0d0a 2320 7370 6563  tus}]"....# spec
-00000330: 6966 7920 7468 6520 656d 6169 6c20 7365  ify the email se
-00000340: 6e64 6572 2773 2061 6e64 2072 6563 6569  nder's and recei
-00000350: 7665 7273 2720 6164 6472 6573 7365 730d  vers' addresses.
-00000360: 0a73 656e 6465 723a 2022 6578 616d 706c  .sender: "exampl
-00000370: 6540 6578 616d 706c 652e 636f 6d22 0d0a  e@example.com"..
-00000380: 7265 6365 6976 6572 733a 200d 0a2d 2022  receivers: ..- "
-00000390: 6578 616d 706c 6540 6578 616d 706c 652e  example@example.
-000003a0: 636f 6d22 0d0a 0d0a 2320 7365 6e64 206c  com"....# send l
-000003b0: 6f67 7320 6279 2065 6d61 696c 206f 6e6c  ogs by email onl
-000003c0: 7920 6966 2074 6865 2070 726f 6772 616d  y if the program
-000003d0: 2072 756e 7320 6166 7465 7220 7468 6520   runs after the 
-000003e0: 7370 6563 6966 6963 2073 6563 6f6e 6473  specific seconds
-000003f0: 0d0a 7365 6e64 5f61 6674 6572 5f73 6563  ..send_after_sec
-00000400: 6f6e 6473 3a20 3336 3030 0d0a 0d0a 2320  onds: 3600....# 
-00000410: 7365 6e64 206c 6f67 7320 6279 2065 6d61  send logs by ema
-00000420: 696c 2045 5645 5259 2073 7065 6369 6669  il EVERY specifi
-00000430: 6320 7365 636f 6e64 7320 6966 2074 6865  c seconds if the
-00000440: 2070 726f 6772 616d 2069 7320 6b65 6570   program is keep
-00000450: 2072 756e 6e69 6e67 0d0a 7365 6e64 5f70   running..send_p
-00000460: 6572 696f 6473 3a20 3836 3430 300d 0a0d  eriods: 86400...
-00000470: 0a27 2727 0d0a 0d0a 0d0a 6465 6620 6173  .'''......def as
-00000480: 5f73 7472 696e 6728 7365 6c66 2c20 756e  _string(self, un
-00000490: 6978 6672 6f6d 3d46 616c 7365 2c20 6d61  ixfrom=False, ma
-000004a0: 7868 6561 6465 726c 656e 3d30 2c20 706f  xheaderlen=0, po
-000004b0: 6c69 6379 3d4e 6f6e 6529 3a0d 0a20 2020  licy=None):..   
-000004c0: 2022 2222 5265 7475 726e 2074 6865 2065   """Return the e
-000004d0: 6e74 6972 6520 666f 726d 6174 7465 6420  ntire formatted 
-000004e0: 6d65 7373 6167 6520 6173 2061 2073 7472  message as a str
-000004f0: 696e 672e 0d0a 0d0a 2020 2020 4f70 7469  ing.....    Opti
-00000500: 6f6e 616c 2027 756e 6978 6672 6f6d 272c  onal 'unixfrom',
-00000510: 2077 6865 6e20 7472 7565 2c20 6d65 616e   when true, mean
-00000520: 7320 696e 636c 7564 6520 7468 6520 556e  s include the Un
-00000530: 6978 2046 726f 6d5f 2065 6e76 656c 6f70  ix From_ envelop
-00000540: 650d 0a20 2020 2068 6561 6465 722e 2020  e..    header.  
-00000550: 466f 7220 6261 636b 7761 7264 2063 6f6d  For backward com
-00000560: 7061 7469 6269 6c69 7479 2072 6561 736f  patibility reaso
-00000570: 6e73 2c20 6966 206d 6178 6865 6164 6572  ns, if maxheader
-00000580: 6c65 6e20 6973 0d0a 2020 2020 6e6f 7420  len is..    not 
-00000590: 7370 6563 6966 6965 6420 6974 2064 6566  specified it def
-000005a0: 6175 6c74 7320 746f 2030 2c20 736f 2079  aults to 0, so y
-000005b0: 6f75 206d 7573 7420 6f76 6572 7269 6465  ou must override
-000005c0: 2069 7420 6578 706c 6963 6974 6c79 0d0a   it explicitly..
-000005d0: 2020 2020 6966 2079 6f75 2077 616e 7420      if you want 
-000005e0: 6120 6469 6666 6572 656e 7420 6d61 7868  a different maxh
-000005f0: 6561 6465 726c 656e 2e20 2027 706f 6c69  eaderlen.  'poli
-00000600: 6379 2720 6973 2070 6173 7365 6420 746f  cy' is passed to
-00000610: 2074 6865 0d0a 2020 2020 4765 6e65 7261   the..    Genera
-00000620: 746f 7220 696e 7374 616e 6365 2075 7365  tor instance use
-00000630: 6420 746f 2073 6572 6961 6c69 7a65 2074  d to serialize t
-00000640: 6865 206d 6573 7361 6765 3b20 6966 2069  he message; if i
-00000650: 7420 6973 206e 6f74 0d0a 2020 2020 7370  t is not..    sp
-00000660: 6563 6966 6965 6420 7468 6520 706f 6c69  ecified the poli
-00000670: 6379 2061 7373 6f63 6961 7465 6420 7769  cy associated wi
-00000680: 7468 2074 6865 206d 6573 7361 6765 2069  th the message i
-00000690: 6e73 7461 6e63 6520 6973 2075 7365 642e  nstance is used.
-000006a0: 0d0a 0d0a 2020 2020 4966 2074 6865 206d  ....    If the m
-000006b0: 6573 7361 6765 206f 626a 6563 7420 636f  essage object co
-000006c0: 6e74 6169 6e73 2062 696e 6172 7920 6461  ntains binary da
-000006d0: 7461 2074 6861 7420 6973 206e 6f74 2065  ta that is not e
-000006e0: 6e63 6f64 6564 0d0a 2020 2020 6163 636f  ncoded..    acco
-000006f0: 7264 696e 6720 746f 2052 4643 2073 7461  rding to RFC sta
-00000700: 6e64 6172 6473 2c20 7468 6520 6e6f 6e2d  ndards, the non-
-00000710: 636f 6d70 6c69 616e 7420 6461 7461 2077  compliant data w
-00000720: 696c 6c20 6265 2072 6570 6c61 6365 6420  ill be replaced 
-00000730: 6279 0d0a 2020 2020 756e 6963 6f64 6520  by..    unicode 
-00000740: 2275 6e6b 6e6f 776e 2063 6861 7261 6374  "unknown charact
-00000750: 6572 2220 636f 6465 2070 6f69 6e74 732e  er" code points.
-00000760: 0d0a 2020 2020 2222 220d 0a20 2020 2070  ..    """..    p
-00000770: 6f6c 6963 7920 3d20 7365 6c66 2e70 6f6c  olicy = self.pol
-00000780: 6963 7920 6966 2070 6f6c 6963 7920 6973  icy if policy is
-00000790: 204e 6f6e 6520 656c 7365 2070 6f6c 6963   None else polic
-000007a0: 790d 0a20 2020 2066 7020 3d20 5374 7269  y..    fp = Stri
-000007b0: 6e67 494f 2829 0d0a 2020 2020 6720 3d20  ngIO()..    g = 
-000007c0: 4765 6e65 7261 746f 7228 6670 2c0d 0a20  Generator(fp,.. 
-000007d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000007e0: 206d 616e 676c 655f 6672 6f6d 5f3d 4661   mangle_from_=Fa
-000007f0: 6c73 652c 0d0a 2020 2020 2020 2020 2020  lse,..          
-00000800: 2020 2020 2020 2020 6d61 7868 6561 6465          maxheade
-00000810: 726c 656e 3d6d 6178 6865 6164 6572 6c65  rlen=maxheaderle
-00000820: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
-00000830: 2020 2020 2020 706f 6c69 6379 3d70 6f6c        policy=pol
-00000840: 6963 7929 0d0a 2020 2020 672e 666c 6174  icy)..    g.flat
-00000850: 7465 6e28 7365 6c66 2c20 756e 6978 6672  ten(self, unixfr
-00000860: 6f6d 3d75 6e69 7866 726f 6d29 0d0a 2020  om=unixfrom)..  
-00000870: 2020 7265 7475 726e 2066 702e 6765 7476    return fp.getv
-00000880: 616c 7565 2829 0d0a 6672 6f6d 2065 6d61  alue()..from ema
-00000890: 696c 2e6d 6573 7361 6765 2069 6d70 6f72  il.message impor
-000008a0: 7420 4d65 7373 6167 650d 0a4d 6573 7361  t Message..Messa
-000008b0: 6765 2e61 735f 7374 7269 6e67 3d61 735f  ge.as_string=as_
-000008c0: 7374 7269 6e67 0d0a 0d0a 636c 6173 7320  string....class 
-000008d0: 5465 7874 494f 5772 6170 7065 7257 6974  TextIOWrapperWit
-000008e0: 684c 6f67 6769 6e67 3a0d 0a20 2020 2064  hLogging:..    d
-000008f0: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00000900: 2c65 6e61 626c 6564 3d54 7275 652c 636f  ,enabled=True,co
-00000910: 6e66 6967 5f61 6464 723d 277e 2f2e 6175  nfig_addr='~/.au
-00000920: 746f 7365 6e64 2e79 616d 6c27 293a 0d0a  tosend.yaml'):..
-00000930: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00000940: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-00000950: 6f6e 6669 6720 3d20 7365 6c66 2e72 6561  onfig = self.rea
-00000960: 645f 636f 6e66 6967 2863 6f6e 6669 675f  d_config(config_
-00000970: 6164 6472 290d 0a20 2020 2020 2020 2065  addr)..        e
-00000980: 7863 6570 7420 4578 6365 7074 696f 6e3a  xcept Exception:
-00000990: 0d0a 2020 2020 2020 2020 2020 2020 7472  ..            tr
-000009a0: 6163 6562 6163 6b2e 7072 696e 745f 6578  aceback.print_ex
-000009b0: 6328 290d 0a20 2020 2020 2020 2020 2020  c()..           
-000009c0: 2070 7269 6e74 2827 2361 7574 6f73 656e   print('#autosen
-000009d0: 643a 2063 616e 6e6f 7420 7265 6164 2063  d: cannot read c
-000009e0: 6f6e 6669 6720 6174 207e 2f2e 6175 746f  onfig at ~/.auto
-000009f0: 7365 6e64 2e79 616d 6c2c 2064 6973 6162  send.yaml, disab
-00000a00: 6c65 2061 7574 6f73 656e 6427 290d 0a20  le autosend').. 
-00000a10: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00000a20: 2827 6966 2079 6f75 2077 616e 7420 746f  ('if you want to
-00000a30: 2075 7365 2074 6869 7320 6d6f 6475 6c65   use this module
-00000a40: 2c20 706c 6561 7365 2063 7265 6174 6520  , please create 
-00000a50: 2e61 7574 6f73 656e 642e 7961 6d6c 2061  .autosend.yaml a
-00000a60: 7420 7e2f 2075 7369 6e67 2074 6865 2066  t ~/ using the f
-00000a70: 6f6c 6c6f 7769 6e67 2074 656d 706c 6174  ollowing templat
-00000a80: 6527 290d 0a20 2020 2020 2020 2020 2020  e')..           
-00000a90: 2070 7269 6e74 2865 7861 6d70 6c65 5f79   print(example_y
-00000aa0: 616d 6c29 0d0a 2020 2020 2020 2020 2020  aml)..          
-00000ab0: 2020 656e 6162 6c65 643d 4661 6c73 650d    enabled=False.
-00000ac0: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
-00000ad0: 6162 6c65 643d 656e 6162 6c65 640d 0a20  abled=enabled.. 
-00000ae0: 2020 2020 2020 2069 6620 6e6f 7420 656e         if not en
-00000af0: 6162 6c65 643a 0d0a 2020 2020 2020 2020  abled:..        
-00000b00: 2020 2020 7265 7475 726e 0d0a 2020 2020      return..    
-00000b10: 2020 2020 7365 6c66 2e62 7566 6665 7220      self.buffer 
-00000b20: 3d20 5374 7269 6e67 494f 2829 0d0a 2020  = StringIO()..  
-00000b30: 2020 2020 2020 7365 6c66 2e73 7461 7274        self.start
-00000b40: 5f74 696d 6520 3d20 7469 6d65 2e74 696d  _time = time.tim
-00000b50: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
-00000b60: 662e 7365 6e64 5f61 6674 6572 5f73 6563  f.send_after_sec
-00000b70: 6f6e 6473 203d 2066 6c6f 6174 2873 656c  onds = float(sel
-00000b80: 662e 636f 6e66 6967 2e67 6574 2827 7365  f.config.get('se
-00000b90: 6e64 5f61 6674 6572 5f73 6563 6f6e 6473  nd_after_seconds
-00000ba0: 272c 3336 3030 2929 0d0a 2020 2020 2020  ',3600))..      
-00000bb0: 2020 7365 6c66 2e73 656e 645f 7065 7269    self.send_peri
-00000bc0: 6f64 7320 3d20 666c 6f61 7428 7365 6c66  ods = float(self
-00000bd0: 2e63 6f6e 6669 672e 6765 7428 2773 656e  .config.get('sen
-00000be0: 645f 7065 7269 6f64 7327 2c20 3836 3430  d_periods', 8640
-00000bf0: 3029 290d 0a20 2020 2020 2020 2073 656c  0))..        sel
-00000c00: 662e 7362 6a5f 666d 743d 7365 6c66 2e63  f.sbj_fmt=self.c
-00000c10: 6f6e 6669 672e 6765 7428 2773 7562 6a65  onfig.get('subje
-00000c20: 6374 5f66 6f72 6d61 7427 2c22 e380 90e7  ct_format',"....
-00000c30: aca6 e590 88e4 bf9d e5af 86e8 a681 e6b1  ................
-00000c40: 82ef bc8c e58f afe5 9ca8 e689 8be6 9cba  ................
-00000c50: e7ab afe6 9fa5 e998 85e3 8091 7b70 6174  ............{pat
-00000c60: 687d e697 a5e5 bf97 205b 7b63 7572 7469  h}...... [{curti
-00000c70: 6d65 7d5d 205b 7b73 7461 7475 737d 5d22  me}] [{status}]"
-00000c80: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
-00000c90: 662e 7374 6172 745f 7469 6d65 5f73 7472  f.start_time_str
-00000ca0: 3d74 696d 652e 7374 7266 7469 6d65 2827  =time.strftime('
-00000cb0: 2559 2d25 6d2d 2564 2025 483a 254d 272c  %Y-%m-%d %H:%M',
-00000cc0: 2074 696d 652e 6c6f 6361 6c74 696d 6528   time.localtime(
-00000cd0: 7365 6c66 2e73 7461 7274 5f74 696d 6529  self.start_time)
-00000ce0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00000cf0: 6c6f 675f 7374 6172 745f 7469 6d65 3d74  log_start_time=t
-00000d00: 696d 652e 7469 6d65 2829 0d0a 2020 2020  ime.time()..    
-00000d10: 2020 2020 7365 6c66 2e61 7267 733d 273b      self.args=';
-00000d20: 2027 2e6a 6f69 6e28 7379 732e 6172 6776   '.join(sys.argv
-00000d30: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00000d40: 6377 6420 3d20 6f73 2e67 6574 6377 6428  cwd = os.getcwd(
-00000d50: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00000d60: 7368 6f75 6c64 5f73 656e 6420 3d20 4661  should_send = Fa
-00000d70: 6c73 650d 0a0d 0a20 2020 2020 2020 2073  lse....        s
-00000d80: 656c 662e 7061 7468 3d6f 732e 7061 7468  elf.path=os.path
-00000d90: 2e62 6173 656e 616d 6528 6f73 2e67 6574  .basename(os.get
-00000da0: 6377 6428 2929 0d0a 2020 2020 2020 2020  cwd())..        
-00000db0: 7365 6c66 2e5f 5f73 7464 6f75 745f 5f20  self.__stdout__ 
-00000dc0: 3d20 7379 732e 7374 646f 7574 0d0a 2020  = sys.stdout..  
-00000dd0: 2020 2020 2020 7365 6c66 2e5f 5f73 7464        self.__std
-00000de0: 6572 725f 5f20 3d20 7379 732e 7374 6465  err__ = sys.stde
-00000df0: 7272 0d0a 2020 2020 2020 2020 7072 696e  rr..        prin
-00000e00: 7428 2723 6175 746f 7365 6e64 3a20 7374  t('#autosend: st
-00000e10: 6172 7469 6e67 206c 6f67 2729 0d0a 2020  arting log')..  
-00000e20: 2020 2020 2020 7379 732e 7374 646f 7574        sys.stdout
-00000e30: 203d 2073 656c 660d 0a20 2020 2020 2020   = self..       
-00000e40: 2073 7973 2e73 7464 6572 7220 3d20 7365   sys.stderr = se
-00000e50: 6c66 0d0a 2020 2020 2020 2020 6174 6578  lf..        atex
-00000e60: 6974 2e72 6567 6973 7465 7228 7365 6c66  it.register(self
-00000e70: 2e5f 5f64 656c 5f5f 290d 0a0d 0a20 2020  .__del__)....   
-00000e80: 2064 6566 2072 6561 645f 636f 6e66 6967   def read_config
-00000e90: 2873 656c 662c 7061 7468 293a 0d0a 2020  (self,path):..  
-00000ea0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-00000eb0: 6f73 2e70 6174 682e 6578 7061 6e64 7573  os.path.expandus
-00000ec0: 6572 2870 6174 6829 2c20 2272 2229 2061  er(path), "r") a
-00000ed0: 7320 7374 7265 616d 3a0d 0a20 2020 2020  s stream:..     
-00000ee0: 2020 2020 2020 2072 6574 7572 6e20 7961         return ya
-00000ef0: 6d6c 2e73 6166 655f 6c6f 6164 2873 7472  ml.safe_load(str
-00000f00: 6561 6d29 0d0a 0d0a 0d0a 2020 2020 6465  eam)......    de
-00000f10: 6620 7772 6974 6528 7365 6c66 2c20 7465  f write(self, te
-00000f20: 7874 293a 0d0a 2020 2020 2020 2020 7365  xt):..        se
-00000f30: 6c66 2e62 7566 6665 722e 7772 6974 6528  lf.buffer.write(
-00000f40: 7465 7874 290d 0a20 2020 2020 2020 2073  text)..        s
-00000f50: 7973 2e5f 5f73 7464 6f75 745f 5f2e 7772  ys.__stdout__.wr
-00000f60: 6974 6528 7465 7874 290d 0a20 2020 2020  ite(text)..     
-00000f70: 2020 2073 656c 662e 6368 6563 6b28 290d     self.check().
-00000f80: 0a0d 0a20 2020 2064 6566 2077 7269 7465  ...    def write
-00000f90: 6c69 6e65 7328 7365 6c66 2c74 6578 7473  lines(self,texts
-00000fa0: 2c2f 293a 0d0a 2020 2020 2020 2020 7365  ,/):..        se
-00000fb0: 6c66 2e62 7566 6665 722e 7772 6974 656c  lf.buffer.writel
-00000fc0: 696e 6573 2874 6578 7473 290d 0a20 2020  ines(texts)..   
-00000fd0: 2020 2020 2073 7973 2e5f 5f73 7464 6f75       sys.__stdou
-00000fe0: 745f 5f2e 7772 6974 656c 696e 6573 2874  t__.writelines(t
-00000ff0: 6578 7473 290d 0a20 2020 2020 2020 2073  exts)..        s
-00001000: 656c 662e 6368 6563 6b28 290d 0a0d 0a20  elf.check().... 
-00001010: 2020 2064 6566 2066 6c75 7368 2873 656c     def flush(sel
-00001020: 6629 3a0d 0a20 2020 2020 2020 2073 7973  f):..        sys
-00001030: 2e5f 5f73 7464 6f75 745f 5f2e 666c 7573  .__stdout__.flus
-00001040: 6828 290d 0a0d 0a20 2020 2064 6566 2063  h()....    def c
-00001050: 6865 636b 2873 656c 6629 3a0d 0a20 2020  heck(self):..   
-00001060: 2020 2020 2065 6c61 7073 6564 5f74 696d       elapsed_tim
-00001070: 6520 3d20 7469 6d65 2e74 696d 6528 2920  e = time.time() 
-00001080: 2d20 7365 6c66 2e6c 6f67 5f73 7461 7274  - self.log_start
-00001090: 5f74 696d 650d 0a20 2020 2020 2020 2073  _time..        s
-000010a0: 656c 662e 7368 6f75 6c64 5f73 656e 6420  elf.should_send 
-000010b0: 3d20 7469 6d65 2e74 696d 6528 2920 2d20  = time.time() - 
-000010c0: 7365 6c66 2e73 7461 7274 5f74 696d 6520  self.start_time 
-000010d0: 3e20 7365 6c66 2e73 656e 645f 6166 7465  > self.send_afte
-000010e0: 725f 7365 636f 6e64 730d 0a20 2020 2020  r_seconds..     
-000010f0: 2020 2069 6620 656c 6170 7365 645f 7469     if elapsed_ti
-00001100: 6d65 203e 2073 656c 662e 7365 6e64 5f70  me > self.send_p
-00001110: 6572 696f 6473 3a0d 0a20 2020 2020 2020  eriods:..       
-00001120: 2020 2020 2073 656c 662e 7365 6e64 5f6c       self.send_l
-00001130: 6f67 7328 2772 756e 6e69 6e67 2729 0d0a  ogs('running')..
-00001140: 0d0a 2020 2020 6465 6620 7365 6e64 5f65  ..    def send_e
-00001150: 6d61 696c 2873 656c 662c 2073 7562 6a65  mail(self, subje
-00001160: 6374 2c20 626f 6479 2c20 6174 7461 6368  ct, body, attach
-00001170: 6d65 6e74 733d 2829 293a 0d0a 2020 2020  ments=()):..    
-00001180: 2020 2020 7365 6e64 6572 203d 2073 656c      sender = sel
-00001190: 662e 636f 6e66 6967 5b27 7365 6e64 6572  f.config['sender
-000011a0: 275d 0d0a 2020 2020 2020 2020 7265 6365  ']..        rece
-000011b0: 6976 6572 7320 3d20 7365 6c66 2e63 6f6e  ivers = self.con
-000011c0: 6669 675b 2772 6563 6569 7665 7273 275d  fig['receivers']
-000011d0: 0d0a 2020 2020 2020 2020 7573 6572 6e61  ..        userna
-000011e0: 6d65 203d 2073 656c 662e 636f 6e66 6967  me = self.config
-000011f0: 5b27 7573 6572 6e61 6d65 275d 0d0a 2020  ['username']..  
-00001200: 2020 2020 2020 7061 7373 776f 7264 203d        password =
-00001210: 2073 656c 662e 636f 6e66 6967 5b27 7061   self.config['pa
-00001220: 7373 776f 7264 275d 0d0a 2020 2020 2020  ssword']..      
-00001230: 2020 7365 7276 6572 203d 2073 656c 662e    server = self.
-00001240: 636f 6e66 6967 5b27 7365 7276 6572 275d  config['server']
-00001250: 0d0a 2020 2020 2020 2020 706f 7274 203d  ..        port =
-00001260: 2073 656c 662e 636f 6e66 6967 2e67 6574   self.config.get
-00001270: 2827 706f 7274 272c 3029 0d0a 2020 2020  ('port',0)..    
-00001280: 2020 2020 7469 6d65 6f75 7420 3d20 7365      timeout = se
-00001290: 6c66 2e63 6f6e 6669 672e 6765 7428 2774  lf.config.get('t
-000012a0: 696d 656f 7574 272c 3135 290d 0a20 2020  imeout',15)..   
-000012b0: 2020 2020 2074 6c73 203d 2073 656c 662e       tls = self.
-000012c0: 636f 6e66 6967 2e67 6574 2827 746c 7327  config.get('tls'
-000012d0: 2c46 616c 7365 290d 0a0d 0a20 2020 2020  ,False)....     
-000012e0: 2020 206d 7367 203d 204d 494d 454d 756c     msg = MIMEMul
-000012f0: 7469 7061 7274 2829 0d0a 2020 2020 2020  tipart()..      
-00001300: 2020 6d73 675b 2746 726f 6d27 5d20 3d20    msg['From'] = 
-00001310: 7365 6e64 6572 0d0a 2020 2020 2020 2020  sender..        
-00001320: 6d73 675b 2754 6f27 5d20 3d20 222c 2022  msg['To'] = ", "
-00001330: 2e6a 6f69 6e28 7265 6365 6976 6572 7329  .join(receivers)
-00001340: 0d0a 2020 2020 2020 2020 6d73 675b 2753  ..        msg['S
-00001350: 7562 6a65 6374 275d 203d 2073 7562 6a65  ubject'] = subje
-00001360: 6374 0d0a 0d0a 2020 2020 2020 2020 6d73  ct....        ms
-00001370: 672e 6174 7461 6368 284d 494d 4554 6578  g.attach(MIMETex
-00001380: 7428 626f 6479 2c20 2770 6c61 696e 2729  t(body, 'plain')
-00001390: 290d 0a0d 0a20 2020 2020 2020 2066 6f72  )....        for
-000013a0: 2061 7474 6163 685f 6e61 6d65 2c61 7474   attach_name,att
-000013b0: 6163 685f 6461 7461 2069 6e20 6174 7461  ach_data in atta
-000013c0: 6368 6d65 6e74 733a 0d0a 2020 2020 2020  chments:..      
-000013d0: 2020 2020 2020 6174 7461 6368 6d65 6e74        attachment
-000013e0: 5f70 6172 7420 3d20 4d49 4d45 4170 706c  _part = MIMEAppl
-000013f0: 6963 6174 696f 6e28 6174 7461 6368 5f64  ication(attach_d
-00001400: 6174 612c 204e 616d 653d 6174 7461 6368  ata, Name=attach
-00001410: 5f6e 616d 6529 0d0a 2020 2020 2020 2020  _name)..        
-00001420: 2020 2020 6174 7461 6368 6d65 6e74 5f70      attachment_p
-00001430: 6172 745b 2743 6f6e 7465 6e74 2d44 6973  art['Content-Dis
-00001440: 706f 7369 7469 6f6e 275d 203d 2066 2761  position'] = f'a
-00001450: 7474 6163 686d 656e 743b 2066 696c 656e  ttachment; filen
-00001460: 616d 653d 227b 6174 7461 6368 5f6e 616d  ame="{attach_nam
-00001470: 657d 2227 0d0a 2020 2020 2020 2020 2020  e}"'..          
-00001480: 2020 6d73 672e 6174 7461 6368 2861 7474    msg.attach(att
-00001490: 6163 686d 656e 745f 7061 7274 290d 0a0d  achment_part)...
-000014a0: 0a20 2020 2020 2020 2073 6d74 705f 7365  .        smtp_se
-000014b0: 7276 6572 203d 2073 6d74 706c 6962 2e53  rver = smtplib.S
-000014c0: 4d54 5028 7365 7276 6572 2c20 706f 7274  MTP(server, port
-000014d0: 2c74 696d 656f 7574 3d74 696d 656f 7574  ,timeout=timeout
-000014e0: 290d 0a20 2020 2020 2020 2069 6620 746c  )..        if tl
-000014f0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-00001500: 736d 7470 5f73 6572 7665 722e 7374 6172  smtp_server.star
-00001510: 7474 6c73 2829 0d0a 2020 2020 2020 2020  ttls()..        
-00001520: 736d 7470 5f73 6572 7665 722e 6c6f 6769  smtp_server.logi
-00001530: 6e28 7573 6572 6e61 6d65 2c20 7061 7373  n(username, pass
-00001540: 776f 7264 290d 0a20 2020 2020 2020 2073  word)..        s
-00001550: 6d74 705f 7365 7276 6572 2e73 656e 646d  mtp_server.sendm
-00001560: 6169 6c28 7365 6e64 6572 2c20 7265 6365  ail(sender, rece
-00001570: 6976 6572 732c 206d 7367 2e61 735f 7374  ivers, msg.as_st
-00001580: 7269 6e67 2829 290d 0a20 2020 2020 2020  ring())..       
-00001590: 2073 6d74 705f 7365 7276 6572 2e71 7569   smtp_server.qui
-000015a0: 7428 290d 0a0d 0a20 2020 2064 6566 2073  t()....    def s
-000015b0: 656e 645f 6c6f 6773 2873 656c 662c 2073  end_logs(self, s
-000015c0: 7461 7475 733d 2727 293a 0d0a 2020 2020  tatus=''):..    
-000015d0: 2020 2020 7365 6c66 2e5f 5f73 7464 6572      self.__stder
-000015e0: 725f 5f2e 7772 6974 6528 2723 6175 746f  r__.write('#auto
-000015f0: 7365 6e64 3a20 7365 6e64 696e 6720 6c6f  send: sending lo
-00001600: 675c 6e27 290d 0a20 2020 2020 2020 2073  g\n')..        s
-00001610: 656c 662e 5f5f 7374 6465 7272 5f5f 2e66  elf.__stderr__.f
-00001620: 6c75 7368 2829 0d0a 2020 2020 2020 2020  lush()..        
-00001630: 6966 206e 6f74 2073 656c 662e 7368 6f75  if not self.shou
-00001640: 6c64 5f73 656e 643a 0d0a 2020 2020 2020  ld_send:..      
-00001650: 2020 2020 2020 7265 7475 726e 0d0a 2020        return..  
-00001660: 2020 2020 2020 7465 7874 7320 3d20 7365        texts = se
-00001670: 6c66 2e62 7566 6665 722e 6765 7476 616c  lf.buffer.getval
-00001680: 7565 2829 0d0a 2020 2020 2020 2020 7365  ue()..        se
-00001690: 6c66 2e62 7566 6665 7220 3d20 5374 7269  lf.buffer = Stri
-000016a0: 6e67 494f 2829 0d0a 2020 2020 2020 2020  ngIO()..        
-000016b0: 7365 6c66 2e6c 6f67 5f73 7461 7274 5f74  self.log_start_t
-000016c0: 696d 6520 3d20 7469 6d65 2e74 696d 6528  ime = time.time(
-000016d0: 290d 0a20 2020 2020 2020 2074 7279 3a0d  )..        try:.
-000016e0: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
-000016f0: 6a65 6374 203d 2073 656c 662e 7362 6a5f  ject = self.sbj_
-00001700: 666d 742e 666f 726d 6174 280d 0a20 2020  fmt.format(..   
-00001710: 2020 2020 2020 2020 2020 2020 2070 6174               pat
-00001720: 683d 7365 6c66 2e70 6174 682c 0d0a 2020  h=self.path,..  
-00001730: 2020 2020 2020 2020 2020 2020 2020 6375                cu
-00001740: 7274 696d 653d 7365 6c66 2e73 7461 7274  rtime=self.start
-00001750: 5f74 696d 655f 7374 722c 0d0a 2020 2020  _time_str,..    
-00001760: 2020 2020 2020 2020 2020 2020 7374 6174              stat
-00001770: 7573 203d 2073 7461 7475 732c 0d0a 2020  us = status,..  
-00001780: 2020 2020 2020 2020 2020 290d 0a20 2020            )..   
-00001790: 2020 2020 2020 2020 206d 6574 615f 696e           meta_in
-000017a0: 666f 3d5b 0d0a 2020 2020 2020 2020 2020  fo=[..          
-000017b0: 2020 2020 2020 2720 7374 6172 745f 7469        ' start_ti
-000017c0: 6d65 3a20 2720 2b20 7365 6c66 2e73 7461  me: ' + self.sta
-000017d0: 7274 5f74 696d 655f 7374 722c 0d0a 2020  rt_time_str,..  
-000017e0: 2020 2020 2020 2020 2020 2020 2020 276c                'l
-000017f0: 6173 7420 7570 6461 7465 3a20 2720 2b20  ast update: ' + 
-00001800: 7469 6d65 2e73 7472 6674 696d 6528 2725  time.strftime('%
-00001810: 592d 256d 2d25 6420 2548 3a25 4d27 292c  Y-%m-%d %H:%M'),
-00001820: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00001830: 2020 2720 2020 776f 726b 5f64 6972 3a20    '   work_dir: 
-00001840: 2720 2b20 7365 6c66 2e63 7764 2c0d 0a20  ' + self.cwd,.. 
-00001850: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00001860: 2020 2020 2020 2061 7267 733a 2027 202b         args: ' +
-00001870: 2073 656c 662e 6172 6773 2c0d 0a20 2020   self.args,..   
-00001880: 2020 2020 2020 2020 2020 2020 2027 3d3d               '==
-00001890: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d20  =============== 
-000018a0: 6c61 7374 2031 3030 206c 696e 6573 206f  last 100 lines o
-000018b0: 6620 7468 6520 6c6f 6720 3d3d 3d3d 3d3d  f the log ======
-000018c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d27 0d0a 2020  ==========='..  
-000018d0: 2020 2020 2020 2020 2020 5d0d 0a0d 0a20            ].... 
-000018e0: 2020 2020 2020 2020 2020 2062 6f64 793d             body=
-000018f0: 275c 6e27 2e6a 6f69 6e28 6d65 7461 5f69  '\n'.join(meta_i
-00001900: 6e66 6f20 2b20 7465 7874 732e 7273 706c  nfo + texts.rspl
-00001910: 6974 2827 5c6e 272c 3130 3029 5b2d 3130  it('\n',100)[-10
-00001920: 303a 5d29 0d0a 2020 2020 2020 2020 2020  0:])..          
-00001930: 2020 6174 7461 6368 6d65 6e74 7320 3d20    attachments = 
-00001940: 5b28 6622 6c6f 6773 5f7b 7469 6d65 2e73  [(f"logs_{time.s
-00001950: 7472 6674 696d 6528 2725 592d 256d 2d25  trftime('%Y-%m-%
-00001960: 642d 2548 2d25 4d27 297d 2e74 7874 222c  d-%H-%M')}.txt",
-00001970: 2074 6578 7473 295d 0d0a 2020 2020 2020   texts)]..      
-00001980: 2020 2020 2020 7365 6c66 2e73 656e 645f        self.send_
-00001990: 656d 6169 6c28 7375 626a 6563 742c 2062  email(subject, b
-000019a0: 6f64 792c 2061 7474 6163 686d 656e 7473  ody, attachments
-000019b0: 290d 0a0d 0a20 2020 2020 2020 2065 7863  )....        exc
-000019c0: 6570 7420 4578 6365 7074 696f 6e3a 0d0a  ept Exception:..
-000019d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000019e0: 2e5f 5f73 7464 6572 725f 5f2e 7772 6974  .__stderr__.writ
-000019f0: 6528 2723 6175 746f 7365 6e64 3a20 656d  e('#autosend: em
-00001a00: 6169 6c20 7365 6e64 696e 6720 6661 696c  ail sending fail
-00001a10: 6564 3a5c 6e27 290d 0a20 2020 2020 2020  ed:\n')..       
-00001a20: 2020 2020 2073 656c 662e 5f5f 7374 6465       self.__stde
-00001a30: 7272 5f5f 2e77 7269 7465 2874 7261 6365  rr__.write(trace
-00001a40: 6261 636b 2e66 6f72 6d61 745f 6578 6328  back.format_exc(
-00001a50: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-00001a60: 7365 6c66 2e5f 5f73 7464 6572 725f 5f2e  self.__stderr__.
-00001a70: 666c 7573 6828 290d 0a0d 0a20 2020 2064  flush()....    d
-00001a80: 6566 205f 5f64 656c 5f5f 2873 656c 6629  ef __del__(self)
-00001a90: 3a0d 0a20 2020 2020 2020 2069 6620 6e6f  :..        if no
-00001aa0: 7420 7365 6c66 2e65 6e61 626c 6564 3a0d  t self.enabled:.
-00001ab0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00001ac0: 7572 6e0d 0a20 2020 2020 2020 2073 656c  urn..        sel
-00001ad0: 662e 656e 6162 6c65 643d 4661 6c73 650d  f.enabled=False.
-00001ae0: 0a20 2020 2020 2020 2073 656c 662e 7365  .        self.se
-00001af0: 6e64 5f6c 6f67 7328 2763 6f6d 706c 6574  nd_logs('complet
-00001b00: 6564 2729 0d0a 2020 2020 2020 2020 7379  ed')..        sy
-00001b10: 732e 7374 646f 7574 203d 2073 656c 662e  s.stdout = self.
-00001b20: 5f5f 7374 646f 7574 5f5f 0d0a 2020 2020  __stdout__..    
-00001b30: 2020 2020 7379 732e 7374 6465 7272 203d      sys.stderr =
-00001b40: 2073 656c 662e 5f5f 7374 6465 7272 5f5f   self.__stderr__
-00001b50: 0d0a 0d0a 6966 2069 6e74 286f 732e 656e  ....if int(os.en
-00001b60: 7669 726f 6e2e 6765 7428 274c 4f43 414c  viron.get('LOCAL
-00001b70: 5f52 414e 4b27 2c6f 732e 656e 7669 726f  _RANK',os.enviro
-00001b80: 6e2e 6765 7428 2752 414e 4b27 2c30 2929  n.get('RANK',0))
-00001b90: 293d 3d30 3a0d 0a20 2020 206c 6f67 6765  )==0:..    logge
-00001ba0: 7220 3d20 5465 7874 494f 5772 6170 7065  r = TextIOWrappe
-00001bb0: 7257 6974 684c 6f67 6769 6e67 2829 0d0a  rWithLogging()..
-00001bc0: 0d0a                                     ..
+00000000: 0a69 6d70 6f72 7420 7379 730a 696d 706f  .import sys.impo
+00000010: 7274 206f 730a 696d 706f 7274 2074 696d  rt os.import tim
+00000020: 650a 696d 706f 7274 2074 7261 6365 6261  e.import traceba
+00000030: 636b 0a0a 696d 706f 7274 2079 616d 6c0a  ck..import yaml.
+00000040: 696d 706f 7274 2073 6d74 706c 6962 0a66  import smtplib.f
+00000050: 726f 6d20 656d 6169 6c2e 6d69 6d65 2e74  rom email.mime.t
+00000060: 6578 7420 696d 706f 7274 204d 494d 4554  ext import MIMET
+00000070: 6578 740a 6672 6f6d 2065 6d61 696c 2e6d  ext.from email.m
+00000080: 696d 652e 6d75 6c74 6970 6172 7420 696d  ime.multipart im
+00000090: 706f 7274 204d 494d 454d 756c 7469 7061  port MIMEMultipa
+000000a0: 7274 0a66 726f 6d20 656d 6169 6c2e 6d69  rt.from email.mi
+000000b0: 6d65 2e61 7070 6c69 6361 7469 6f6e 2069  me.application i
+000000c0: 6d70 6f72 7420 4d49 4d45 4170 706c 6963  mport MIMEApplic
+000000d0: 6174 696f 6e0a 6672 6f6d 2069 6f20 696d  ation.from io im
+000000e0: 706f 7274 2053 7472 696e 6749 4f0a 696d  port StringIO.im
+000000f0: 706f 7274 2061 7465 7869 740a 6672 6f6d  port atexit.from
+00000100: 2065 6d61 696c 2e67 656e 6572 6174 6f72   email.generator
+00000110: 2069 6d70 6f72 7420 4765 6e65 7261 746f   import Generato
+00000120: 720a 6672 6f6d 2068 746d 6c20 696d 706f  r.from html impo
+00000130: 7274 2065 7363 6170 650a 0a64 6566 2061  rt escape..def a
+00000140: 735f 7374 7269 6e67 2873 656c 662c 2075  s_string(self, u
+00000150: 6e69 7866 726f 6d3d 4661 6c73 652c 206d  nixfrom=False, m
+00000160: 6178 6865 6164 6572 6c65 6e3d 302c 2070  axheaderlen=0, p
+00000170: 6f6c 6963 793d 4e6f 6e65 293a 0a20 2020  olicy=None):.   
+00000180: 2022 2222 5265 7475 726e 2074 6865 2065   """Return the e
+00000190: 6e74 6972 6520 666f 726d 6174 7465 6420  ntire formatted 
+000001a0: 6d65 7373 6167 6520 6173 2061 2073 7472  message as a str
+000001b0: 696e 672e 0a0a 2020 2020 4f70 7469 6f6e  ing...    Option
+000001c0: 616c 2027 756e 6978 6672 6f6d 272c 2077  al 'unixfrom', w
+000001d0: 6865 6e20 7472 7565 2c20 6d65 616e 7320  hen true, means 
+000001e0: 696e 636c 7564 6520 7468 6520 556e 6978  include the Unix
+000001f0: 2046 726f 6d5f 2065 6e76 656c 6f70 650a   From_ envelope.
+00000200: 2020 2020 6865 6164 6572 2e20 2046 6f72      header.  For
+00000210: 2062 6163 6b77 6172 6420 636f 6d70 6174   backward compat
+00000220: 6962 696c 6974 7920 7265 6173 6f6e 732c  ibility reasons,
+00000230: 2069 6620 6d61 7868 6561 6465 726c 656e   if maxheaderlen
+00000240: 2069 730a 2020 2020 6e6f 7420 7370 6563   is.    not spec
+00000250: 6966 6965 6420 6974 2064 6566 6175 6c74  ified it default
+00000260: 7320 746f 2030 2c20 736f 2079 6f75 206d  s to 0, so you m
+00000270: 7573 7420 6f76 6572 7269 6465 2069 7420  ust override it 
+00000280: 6578 706c 6963 6974 6c79 0a20 2020 2069  explicitly.    i
+00000290: 6620 796f 7520 7761 6e74 2061 2064 6966  f you want a dif
+000002a0: 6665 7265 6e74 206d 6178 6865 6164 6572  ferent maxheader
+000002b0: 6c65 6e2e 2020 2770 6f6c 6963 7927 2069  len.  'policy' i
+000002c0: 7320 7061 7373 6564 2074 6f20 7468 650a  s passed to the.
+000002d0: 2020 2020 4765 6e65 7261 746f 7220 696e      Generator in
+000002e0: 7374 616e 6365 2075 7365 6420 746f 2073  stance used to s
+000002f0: 6572 6961 6c69 7a65 2074 6865 206d 6573  erialize the mes
+00000300: 7361 6765 3b20 6966 2069 7420 6973 206e  sage; if it is n
+00000310: 6f74 0a20 2020 2073 7065 6369 6669 6564  ot.    specified
+00000320: 2074 6865 2070 6f6c 6963 7920 6173 736f   the policy asso
+00000330: 6369 6174 6564 2077 6974 6820 7468 6520  ciated with the 
+00000340: 6d65 7373 6167 6520 696e 7374 616e 6365  message instance
+00000350: 2069 7320 7573 6564 2e0a 0a20 2020 2049   is used...    I
+00000360: 6620 7468 6520 6d65 7373 6167 6520 6f62  f the message ob
+00000370: 6a65 6374 2063 6f6e 7461 696e 7320 6269  ject contains bi
+00000380: 6e61 7279 2064 6174 6120 7468 6174 2069  nary data that i
+00000390: 7320 6e6f 7420 656e 636f 6465 640a 2020  s not encoded.  
+000003a0: 2020 6163 636f 7264 696e 6720 746f 2052    according to R
+000003b0: 4643 2073 7461 6e64 6172 6473 2c20 7468  FC standards, th
+000003c0: 6520 6e6f 6e2d 636f 6d70 6c69 616e 7420  e non-compliant 
+000003d0: 6461 7461 2077 696c 6c20 6265 2072 6570  data will be rep
+000003e0: 6c61 6365 6420 6279 0a20 2020 2075 6e69  laced by.    uni
+000003f0: 636f 6465 2022 756e 6b6e 6f77 6e20 6368  code "unknown ch
+00000400: 6172 6163 7465 7222 2063 6f64 6520 706f  aracter" code po
+00000410: 696e 7473 2e0a 2020 2020 2222 220a 2020  ints..    """.  
+00000420: 2020 706f 6c69 6379 203d 2073 656c 662e    policy = self.
+00000430: 706f 6c69 6379 2069 6620 706f 6c69 6379  policy if policy
+00000440: 2069 7320 4e6f 6e65 2065 6c73 6520 706f   is None else po
+00000450: 6c69 6379 0a20 2020 2066 7020 3d20 5374  licy.    fp = St
+00000460: 7269 6e67 494f 2829 0a20 2020 2067 203d  ringIO().    g =
+00000470: 2047 656e 6572 6174 6f72 2866 702c 0a20   Generator(fp,. 
+00000480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000490: 206d 616e 676c 655f 6672 6f6d 5f3d 4661   mangle_from_=Fa
+000004a0: 6c73 652c 0a20 2020 2020 2020 2020 2020  lse,.           
+000004b0: 2020 2020 2020 206d 6178 6865 6164 6572         maxheader
+000004c0: 6c65 6e3d 6d61 7868 6561 6465 726c 656e  len=maxheaderlen
+000004d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000004e0: 2020 2020 706f 6c69 6379 3d70 6f6c 6963      policy=polic
+000004f0: 7929 0a20 2020 2067 2e66 6c61 7474 656e  y).    g.flatten
+00000500: 2873 656c 662c 2075 6e69 7866 726f 6d3d  (self, unixfrom=
+00000510: 756e 6978 6672 6f6d 290a 2020 2020 7265  unixfrom).    re
+00000520: 7475 726e 2066 702e 6765 7476 616c 7565  turn fp.getvalue
+00000530: 2829 0a66 726f 6d20 656d 6169 6c2e 6d65  ().from email.me
+00000540: 7373 6167 6520 696d 706f 7274 204d 6573  ssage import Mes
+00000550: 7361 6765 0a4d 6573 7361 6765 2e61 735f  sage.Message.as_
+00000560: 7374 7269 6e67 3d61 735f 7374 7269 6e67  string=as_string
+00000570: 0a0a 6578 616d 706c 655f 7961 6d6c 3d27  ..example_yaml='
+00000580: 2727 0a23 2020 3d3d 3d3d 3d3d 3d3d 3d3d  ''.#  ==========
+00000590: 3d20 6175 746f 7365 6e64 2079 616d 6c20  = autosend yaml 
+000005a0: 7465 6d70 6c61 7465 203d 3d3d 3d3d 3d3d  template =======
+000005b0: 3d3d 3d3d 3d0a 2320 7370 6563 6966 7920  =====.# specify 
+000005c0: 7468 6520 656d 6169 6c20 534d 5450 2073  the email SMTP s
+000005d0: 6572 7665 720a 7573 6572 6e61 6d65 3a20  erver.username: 
+000005e0: 2275 7365 726e 616d 6522 0a70 6173 7377  "username".passw
+000005f0: 6f72 643a 2022 7061 7373 776f 7264 220a  ord: "password".
+00000600: 7365 7276 6572 3a20 736d 7470 2e65 7861  server: smtp.exa
+00000610: 6d70 6c65 2e63 6f6d 0a70 6f72 743a 2032  mple.com.port: 2
+00000620: 350a 746c 733a 2046 616c 7365 0a74 696d  5.tls: False.tim
+00000630: 656f 7574 3a20 3135 0a0a 2320 7370 6563  eout: 15..# spec
+00000640: 6966 7920 7468 6520 656d 6169 6c20 7375  ify the email su
+00000650: 626a 6563 7420 666f 726d 6174 2c20 7768  bject format, wh
+00000660: 6572 6520 7b70 6174 687d 2069 6d70 6c69  ere {path} impli
+00000670: 6573 2074 6865 2077 6f72 6b5f 6469 7220  es the work_dir 
+00000680: 7275 6e6e 696e 6720 7468 6520 7079 7468  running the pyth
+00000690: 6f6e 2073 6372 6970 742c 0a23 207b 6375  on script,.# {cu
+000006a0: 7274 696d 657d 2069 6d70 6c69 6573 2074  rtime} implies t
+000006b0: 6865 2063 7572 7265 6e74 2064 6174 6520  he current date 
+000006c0: 616e 6420 7469 6d65 2c20 616e 6420 7b73  and time, and {s
+000006d0: 7461 7475 737d 206d 6179 2062 6520 7275  tatus} may be ru
+000006e0: 6e6e 696e 6720 6f72 2063 6f6d 706c 6574  nning or complet
+000006f0: 6520 0a73 7562 6a65 6374 5f66 6f72 6d61  e .subject_forma
+00000700: 743a 2022 e380 90e7 aca6 e590 88e4 bf9d  t: "............
+00000710: e5af 86e8 a681 e6b1 82ef bc8c e58f afe5  ................
+00000720: 9ca8 e689 8be6 9cba e7ab afe6 9fa5 e998  ................
+00000730: 85e3 8091 7b70 6174 687d e697 a5e5 bf97  ....{path}......
+00000740: 205b 7b63 7572 7469 6d65 7d5d 205b 7b73   [{curtime}] [{s
+00000750: 7461 7475 737d 5d22 0a0a 2320 7370 6563  tatus}]"..# spec
+00000760: 6966 7920 7468 6520 656d 6169 6c20 7365  ify the email se
+00000770: 6e64 6572 2773 2061 6e64 2072 6563 6569  nder's and recei
+00000780: 7665 7273 2720 6164 6472 6573 7365 730a  vers' addresses.
+00000790: 7365 6e64 6572 3a20 2265 7861 6d70 6c65  sender: "example
+000007a0: 4065 7861 6d70 6c65 2e63 6f6d 220a 7265  @example.com".re
+000007b0: 6365 6976 6572 733a 200a 2d20 2265 7861  ceivers: .- "exa
+000007c0: 6d70 6c65 4065 7861 6d70 6c65 2e63 6f6d  mple@example.com
+000007d0: 220a 0a23 2073 656e 6420 6c6f 6773 2062  "..# send logs b
+000007e0: 7920 656d 6169 6c20 6f6e 6c79 2069 6620  y email only if 
+000007f0: 7468 6520 7072 6f67 7261 6d20 7275 6e73  the program runs
+00000800: 2061 6674 6572 2074 6865 2073 7065 6369   after the speci
+00000810: 6669 6320 7365 636f 6e64 730a 7365 6e64  fic seconds.send
+00000820: 5f61 6674 6572 5f73 6563 6f6e 6473 3a20  _after_seconds: 
+00000830: 3336 3030 0a0a 2320 7365 6e64 206c 6f67  3600..# send log
+00000840: 7320 6279 2065 6d61 696c 2045 5645 5259  s by email EVERY
+00000850: 2073 7065 6369 6669 6320 7365 636f 6e64   specific second
+00000860: 7320 6966 2074 6865 2070 726f 6772 616d  s if the program
+00000870: 2069 7320 6b65 6570 2072 756e 6e69 6e67   is keep running
+00000880: 0a73 656e 645f 7065 7269 6f64 733a 2038  .send_periods: 8
+00000890: 3634 3030 0a0a 2320 7768 6574 6865 7220  6400..# whether 
+000008a0: 636c 6561 7220 6869 7374 6f72 7920 6c6f  clear history lo
+000008b0: 6773 2061 6674 6572 2061 7574 6f73 656e  gs after autosen
+000008c0: 6469 6e67 2073 6f20 7468 6174 2074 6865  ding so that the
+000008d0: 206e 6578 7420 7365 6e64 696e 6720 7769   next sending wi
+000008e0: 6c6c 206e 6f74 2063 6f6e 7461 696e 2072  ll not contain r
+000008f0: 6570 6561 7465 6420 0a63 6c65 6172 5f61  epeated .clear_a
+00000900: 6674 6572 5f73 656e 643a 2054 7275 650a  fter_send: True.
+00000910: 0a23 2077 6865 7468 6572 2073 656e 6420  .# whether send 
+00000920: 6874 6d6c 2066 6f72 6d61 7420 6c6f 6773  html format logs
+00000930: 2069 6e73 7465 6164 206f 6620 706c 6169   instead of plai
+00000940: 6e20 7465 7874 0a68 746d 6c3a 2054 7275  n text.html: Tru
+00000950: 650a 2727 270a 0a64 6566 2073 696d 756c  e.'''..def simul
+00000960: 6174 655f 7465 726d 696e 616c 5f6f 7574  ate_terminal_out
+00000970: 7075 7428 6f75 7470 7574 5f73 7472 293a  put(output_str):
+00000980: 0a20 2020 2077 6964 7468 203d 2031 3430  .    width = 140
+00000990: 0a20 2020 2063 7572 7265 6e74 5f70 6f73  .    current_pos
+000009a0: 203d 2030 0a20 2020 206c 696e 6573 203d   = 0.    lines =
+000009b0: 205b 5d0a 2020 2020 6375 7272 656e 745f   [].    current_
+000009c0: 6c69 6e65 203d 2022 220a 2020 2020 0a20  line = "".    . 
+000009d0: 2020 2023 2049 7465 7261 7465 2074 6872     # Iterate thr
+000009e0: 6f75 6768 2065 6163 6820 6368 6172 6163  ough each charac
+000009f0: 7465 7220 696e 2074 6865 2069 6e70 7574  ter in the input
+00000a00: 2073 7472 696e 670a 2020 2020 666f 7220   string.    for 
+00000a10: 6368 6172 2069 6e20 6f75 7470 7574 5f73  char in output_s
+00000a20: 7472 3a0a 2020 2020 2020 2020 2320 4861  tr:.        # Ha
+00000a30: 6e64 6c65 2063 6f6e 7472 6f6c 2063 6861  ndle control cha
+00000a40: 7261 6374 6572 730a 2020 2020 2020 2020  racters.        
+00000a50: 6966 2063 6861 7220 3d3d 2027 5c62 273a  if char == '\b':
+00000a60: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00000a70: 6375 7272 656e 745f 706f 7320 3e20 303a  current_pos > 0:
+00000a80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000a90: 2063 7572 7265 6e74 5f70 6f73 202d 3d20   current_pos -= 
+00000aa0: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+00000ab0: 2020 6375 7272 656e 745f 6c69 6e65 203d    current_line =
+00000ac0: 2063 7572 7265 6e74 5f6c 696e 655b 3a2d   current_line[:-
+00000ad0: 315d 0a20 2020 2020 2020 2065 6c69 6620  1].        elif 
+00000ae0: 6368 6172 203d 3d20 275c 7227 3a0a 2020  char == '\r':.  
+00000af0: 2020 2020 2020 2020 2020 6375 7272 656e            curren
+00000b00: 745f 706f 7320 3d20 300a 2020 2020 2020  t_pos = 0.      
+00000b10: 2020 2020 2020 6375 7272 656e 745f 6c69        current_li
+00000b20: 6e65 203d 2022 220a 2020 2020 2020 2020  ne = "".        
+00000b30: 656c 6966 2063 6861 7220 3d3d 2027 5c6e  elif char == '\n
+00000b40: 273a 0a20 2020 2020 2020 2020 2020 206c  ':.            l
+00000b50: 696e 6573 2e61 7070 656e 6428 6375 7272  ines.append(curr
+00000b60: 656e 745f 6c69 6e65 290a 2020 2020 2020  ent_line).      
+00000b70: 2020 2020 2020 6375 7272 656e 745f 6c69        current_li
+00000b80: 6e65 203d 2022 220a 2020 2020 2020 2020  ne = "".        
+00000b90: 2020 2020 6375 7272 656e 745f 706f 7320      current_pos 
+00000ba0: 3d20 300a 2020 2020 2020 2020 656c 7365  = 0.        else
+00000bb0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+00000bc0: 4170 7065 6e64 2070 7269 6e74 6162 6c65  Append printable
+00000bd0: 2063 6861 7261 6374 6572 7320 746f 2063   characters to c
+00000be0: 7572 7265 6e74 206c 696e 650a 2020 2020  urrent line.    
+00000bf0: 2020 2020 2020 2020 6966 2063 7572 7265          if curre
+00000c00: 6e74 5f70 6f73 203e 3d20 7769 6474 683a  nt_pos >= width:
+00000c10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000c20: 206c 696e 6573 2e61 7070 656e 6428 6375   lines.append(cu
+00000c30: 7272 656e 745f 6c69 6e65 290a 2020 2020  rrent_line).    
+00000c40: 2020 2020 2020 2020 2020 2020 6375 7272              curr
+00000c50: 656e 745f 6c69 6e65 203d 2022 220a 2020  ent_line = "".  
+00000c60: 2020 2020 2020 2020 2020 2020 2020 6375                cu
+00000c70: 7272 656e 745f 706f 7320 3d20 300a 2020  rrent_pos = 0.  
+00000c80: 2020 2020 2020 2020 2020 6375 7272 656e            curren
+00000c90: 745f 6c69 6e65 202b 3d20 6368 6172 0a20  t_line += char. 
+00000ca0: 2020 2020 2020 2020 2020 2063 7572 7265             curre
+00000cb0: 6e74 5f70 6f73 202b 3d20 310a 2020 2020  nt_pos += 1.    
+00000cc0: 6c69 6e65 732e 6170 7065 6e64 2863 7572  lines.append(cur
+00000cd0: 7265 6e74 5f6c 696e 6529 0a20 2020 2072  rent_line).    r
+00000ce0: 6574 7572 6e20 6c69 6e65 730a 0a64 6566  eturn lines..def
+00000cf0: 206c 696e 6573 5f74 6f5f 7465 7874 286c   lines_to_text(l
+00000d00: 696e 6573 2c70 6c61 696e 3d46 616c 7365  ines,plain=False
+00000d10: 293a 0a20 2020 2069 6620 706c 6169 6e3a  ):.    if plain:
+00000d20: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00000d30: 275c 6e27 2e6a 6f69 6e28 6c69 6e65 7329  '\n'.join(lines)
+00000d40: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+00000d50: 2020 2023 2047 656e 6572 6174 6520 4854     # Generate HT
+00000d60: 4d4c 2064 6f63 756d 656e 740a 2020 2020  ML document.    
+00000d70: 2020 2020 6874 6d6c 5f6f 7574 7075 7420      html_output 
+00000d80: 3d20 223c 6874 6d6c 3e3c 6865 6164 3e3c  = "<html><head><
+00000d90: 7374 796c 653e 7072 6520 7b66 6f6e 742d  style>pre {font-
+00000da0: 6661 6d69 6c79 3a20 2743 6f75 7269 6572  family: 'Courier
+00000db0: 204e 6577 272c 2022 205c 0a20 2020 2020   New', " \.     
+00000dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000dd0: 2022 436f 7572 6965 722c 206d 6f6e 6f73   "Courier, monos
+00000de0: 7061 6365 3b20 666f 6e74 2d73 697a 653a  pace; font-size:
+00000df0: 2031 3470 783b 7d3c 2f73 7479 6c65 3e3c   14px;}</style><
+00000e00: 2f68 6561 643e 3c62 6f64 793e 3c70 7265  /head><body><pre
+00000e10: 3e22 0a20 2020 2020 2020 2066 6f72 206c  >".        for l
+00000e20: 696e 6520 696e 206c 696e 6573 3a0a 2020  ine in lines:.  
+00000e30: 2020 2020 2020 2020 2020 6874 6d6c 5f6f            html_o
+00000e40: 7574 7075 7420 2b3d 2065 7363 6170 6528  utput += escape(
+00000e50: 6c69 6e65 2920 2b20 223c 6272 2f3e 220a  line) + "<br/>".
+00000e60: 2020 2020 2020 2020 6874 6d6c 5f6f 7574          html_out
+00000e70: 7075 7420 2b3d 2022 3c2f 7072 653e 3c2f  put += "</pre></
+00000e80: 626f 6479 3e3c 2f68 746d 6c3e 220a 2020  body></html>".  
+00000e90: 2020 2020 2020 7265 7475 726e 2068 746d        return htm
+00000ea0: 6c5f 6f75 7470 7574 0a0a 636c 6173 7320  l_output..class 
+00000eb0: 5465 7874 494f 5772 6170 7065 7257 6974  TextIOWrapperWit
+00000ec0: 684c 6f67 6769 6e67 3a0a 2020 2020 6465  hLogging:.    de
+00000ed0: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+00000ee0: 656e 6162 6c65 643d 5472 7565 2c63 6f6e  enabled=True,con
+00000ef0: 6669 675f 6164 6472 3d27 7e2f 2e61 7574  fig_addr='~/.aut
+00000f00: 6f73 656e 642e 7961 6d6c 2729 3a0a 2020  osend.yaml'):.  
+00000f10: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+00000f20: 2020 2020 2020 2073 656c 662e 636f 6e66         self.conf
+00000f30: 6967 203d 2073 656c 662e 7265 6164 5f63  ig = self.read_c
+00000f40: 6f6e 6669 6728 636f 6e66 6967 5f61 6464  onfig(config_add
+00000f50: 7229 0a20 2020 2020 2020 2065 7863 6570  r).        excep
+00000f60: 7420 4578 6365 7074 696f 6e3a 0a20 2020  t Exception:.   
+00000f70: 2020 2020 2020 2020 2074 7261 6365 6261           traceba
+00000f80: 636b 2e70 7269 6e74 5f65 7863 2829 0a20  ck.print_exc(). 
+00000f90: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00000fa0: 2827 2361 7574 6f73 656e 643a 2063 616e  ('#autosend: can
+00000fb0: 6e6f 7420 7265 6164 2063 6f6e 6669 6720  not read config 
+00000fc0: 6174 207e 2f2e 6175 746f 7365 6e64 2e79  at ~/.autosend.y
+00000fd0: 616d 6c2c 2064 6973 6162 6c65 2061 7574  aml, disable aut
+00000fe0: 6f73 656e 6427 290a 2020 2020 2020 2020  osend').        
+00000ff0: 2020 2020 7072 696e 7428 2769 6620 796f      print('if yo
+00001000: 7520 7761 6e74 2074 6f20 7573 6520 7468  u want to use th
+00001010: 6973 206d 6f64 756c 652c 2070 6c65 6173  is module, pleas
+00001020: 6520 6372 6561 7465 202e 6175 746f 7365  e create .autose
+00001030: 6e64 2e79 616d 6c20 6174 207e 2f20 7573  nd.yaml at ~/ us
+00001040: 696e 6720 7468 6520 666f 6c6c 6f77 696e  ing the followin
+00001050: 6720 7465 6d70 6c61 7465 2729 0a20 2020  g template').   
+00001060: 2020 2020 2020 2020 2070 7269 6e74 2865           print(e
+00001070: 7861 6d70 6c65 5f79 616d 6c29 0a20 2020  xample_yaml).   
+00001080: 2020 2020 2020 2020 2065 6e61 626c 6564           enabled
+00001090: 3d46 616c 7365 0a20 2020 2020 2020 2073  =False.        s
+000010a0: 656c 662e 656e 6162 6c65 643d 656e 6162  elf.enabled=enab
+000010b0: 6c65 640a 2020 2020 2020 2020 6966 206e  led.        if n
+000010c0: 6f74 2065 6e61 626c 6564 3a0a 2020 2020  ot enabled:.    
+000010d0: 2020 2020 2020 2020 7265 7475 726e 0a20          return. 
+000010e0: 2020 2020 2020 2073 656c 662e 6275 6666         self.buff
+000010f0: 6572 203d 2053 7472 696e 6749 4f28 290a  er = StringIO().
+00001100: 2020 2020 2020 2020 7365 6c66 2e73 7461          self.sta
+00001110: 7274 5f74 696d 6520 3d20 7469 6d65 2e74  rt_time = time.t
+00001120: 696d 6528 290a 2020 2020 2020 2020 7365  ime().        se
+00001130: 6c66 2e73 656e 645f 6166 7465 725f 7365  lf.send_after_se
+00001140: 636f 6e64 7320 3d20 666c 6f61 7428 7365  conds = float(se
+00001150: 6c66 2e63 6f6e 6669 672e 6765 7428 2773  lf.config.get('s
+00001160: 656e 645f 6166 7465 725f 7365 636f 6e64  end_after_second
+00001170: 7327 2c33 3630 3029 290a 2020 2020 2020  s',3600)).      
+00001180: 2020 7365 6c66 2e73 656e 645f 7065 7269    self.send_peri
+00001190: 6f64 7320 3d20 666c 6f61 7428 7365 6c66  ods = float(self
+000011a0: 2e63 6f6e 6669 672e 6765 7428 2773 656e  .config.get('sen
+000011b0: 645f 7065 7269 6f64 7327 2c20 3836 3430  d_periods', 8640
+000011c0: 3029 290a 2020 2020 2020 2020 7365 6c66  0)).        self
+000011d0: 2e73 626a 5f66 6d74 3d73 656c 662e 636f  .sbj_fmt=self.co
+000011e0: 6e66 6967 2e67 6574 2827 7375 626a 6563  nfig.get('subjec
+000011f0: 745f 666f 726d 6174 272c 22e3 8090 e7ac  t_format',".....
+00001200: a6e5 9088 e4bf 9de5 af86 e8a6 81e6 b182  ................
+00001210: efbc 8ce5 8faf e59c a8e6 898b e69c bae7  ................
+00001220: abaf e69f a5e9 9885 e380 917b 7061 7468  ...........{path
+00001230: 7de6 97a5 e5bf 9720 5b7b 6375 7274 696d  }...... [{curtim
+00001240: 657d 5d20 5b7b 7374 6174 7573 7d5d 2229  e}] [{status}]")
+00001250: 0a20 2020 2020 2020 2073 656c 662e 636c  .        self.cl
+00001260: 6561 725f 6166 7465 725f 7365 6e64 203d  ear_after_send =
+00001270: 2073 656c 662e 636f 6e66 6967 2e67 6574   self.config.get
+00001280: 2827 636c 6561 725f 6166 7465 725f 7365  ('clear_after_se
+00001290: 6e64 272c 5472 7565 290a 2020 2020 2020  nd',True).      
+000012a0: 2020 7365 6c66 2e68 746d 6c20 3d20 7365    self.html = se
+000012b0: 6c66 2e63 6f6e 6669 672e 6765 7428 2768  lf.config.get('h
+000012c0: 746d 6c27 2c54 7275 6529 0a0a 2020 2020  tml',True)..    
+000012d0: 2020 2020 7365 6c66 2e73 7461 7274 5f74      self.start_t
+000012e0: 696d 655f 7374 723d 7469 6d65 2e73 7472  ime_str=time.str
+000012f0: 6674 696d 6528 2725 592d 256d 2d25 6420  ftime('%Y-%m-%d 
+00001300: 2548 3a25 4d27 2c20 7469 6d65 2e6c 6f63  %H:%M', time.loc
+00001310: 616c 7469 6d65 2873 656c 662e 7374 6172  altime(self.star
+00001320: 745f 7469 6d65 2929 0a20 2020 2020 2020  t_time)).       
+00001330: 2073 656c 662e 6c6f 675f 7374 6172 745f   self.log_start_
+00001340: 7469 6d65 3d74 696d 652e 7469 6d65 2829  time=time.time()
+00001350: 0a20 2020 2020 2020 2073 656c 662e 6172  .        self.ar
+00001360: 6773 3d27 3b20 272e 6a6f 696e 2873 7973  gs='; '.join(sys
+00001370: 2e61 7267 7629 0a20 2020 2020 2020 2073  .argv).        s
+00001380: 656c 662e 6377 6420 3d20 6f73 2e67 6574  elf.cwd = os.get
+00001390: 6377 6428 290a 2020 2020 2020 2020 7365  cwd().        se
+000013a0: 6c66 2e73 686f 756c 645f 7365 6e64 203d  lf.should_send =
+000013b0: 2046 616c 7365 0a0a 2020 2020 2020 2020   False..        
+000013c0: 7365 6c66 2e70 6174 683d 6f73 2e70 6174  self.path=os.pat
+000013d0: 682e 6261 7365 6e61 6d65 286f 732e 6765  h.basename(os.ge
+000013e0: 7463 7764 2829 290a 2020 2020 2020 2020  tcwd()).        
+000013f0: 7365 6c66 2e5f 5f73 7464 6f75 745f 5f20  self.__stdout__ 
+00001400: 3d20 7379 732e 7374 646f 7574 0a20 2020  = sys.stdout.   
+00001410: 2020 2020 2073 656c 662e 5f5f 7374 6465       self.__stde
+00001420: 7272 5f5f 203d 2073 7973 2e73 7464 6572  rr__ = sys.stder
+00001430: 720a 2020 2020 2020 2020 7072 696e 7428  r.        print(
+00001440: 2723 6175 746f 7365 6e64 3a20 7374 6172  '#autosend: star
+00001450: 7469 6e67 206c 6f67 2729 0a20 2020 2020  ting log').     
+00001460: 2020 2073 7973 2e73 7464 6f75 7420 3d20     sys.stdout = 
+00001470: 7365 6c66 0a20 2020 2020 2020 2073 7973  self.        sys
+00001480: 2e73 7464 6572 7220 3d20 7365 6c66 0a20  .stderr = self. 
+00001490: 2020 2020 2020 2061 7465 7869 742e 7265         atexit.re
+000014a0: 6769 7374 6572 2873 656c 662e 5f5f 6465  gister(self.__de
+000014b0: 6c5f 5f29 0a0a 2020 2020 6465 6620 7265  l__)..    def re
+000014c0: 6164 5f63 6f6e 6669 6728 7365 6c66 2c70  ad_config(self,p
+000014d0: 6174 6829 3a0a 2020 2020 2020 2020 7769  ath):.        wi
+000014e0: 7468 206f 7065 6e28 6f73 2e70 6174 682e  th open(os.path.
+000014f0: 6578 7061 6e64 7573 6572 2870 6174 6829  expanduser(path)
+00001500: 2c20 2272 222c 2065 6e63 6f64 696e 673d  , "r", encoding=
+00001510: 2775 7466 2d38 2729 2061 7320 7374 7265  'utf-8') as stre
+00001520: 616d 3a0a 2020 2020 2020 2020 2020 2020  am:.            
+00001530: 7265 7475 726e 2079 616d 6c2e 7361 6665  return yaml.safe
+00001540: 5f6c 6f61 6428 7374 7265 616d 290a 0a0a  _load(stream)...
+00001550: 2020 2020 6465 6620 7772 6974 6528 7365      def write(se
+00001560: 6c66 2c20 7465 7874 293a 0a20 2020 2020  lf, text):.     
+00001570: 2020 2073 656c 662e 6275 6666 6572 2e77     self.buffer.w
+00001580: 7269 7465 2874 6578 7429 0a20 2020 2020  rite(text).     
+00001590: 2020 2073 7973 2e5f 5f73 7464 6f75 745f     sys.__stdout_
+000015a0: 5f2e 7772 6974 6528 7465 7874 290a 2020  _.write(text).  
+000015b0: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
+000015c0: 2829 0a0a 2020 2020 6465 6620 7772 6974  ()..    def writ
+000015d0: 656c 696e 6573 2873 656c 662c 7465 7874  elines(self,text
+000015e0: 732c 2f29 3a0a 2020 2020 2020 2020 7365  s,/):.        se
+000015f0: 6c66 2e62 7566 6665 722e 7772 6974 656c  lf.buffer.writel
+00001600: 696e 6573 2874 6578 7473 290a 2020 2020  ines(texts).    
+00001610: 2020 2020 7379 732e 5f5f 7374 646f 7574      sys.__stdout
+00001620: 5f5f 2e77 7269 7465 6c69 6e65 7328 7465  __.writelines(te
+00001630: 7874 7329 0a20 2020 2020 2020 2073 656c  xts).        sel
+00001640: 662e 6368 6563 6b28 290a 0a20 2020 2064  f.check()..    d
+00001650: 6566 2066 6c75 7368 2873 656c 6629 3a0a  ef flush(self):.
+00001660: 2020 2020 2020 2020 7379 732e 5f5f 7374          sys.__st
+00001670: 646f 7574 5f5f 2e66 6c75 7368 2829 0a0a  dout__.flush()..
+00001680: 2020 2020 6465 6620 6368 6563 6b28 7365      def check(se
+00001690: 6c66 293a 0a20 2020 2020 2020 2065 6c61  lf):.        ela
+000016a0: 7073 6564 5f74 696d 6520 3d20 7469 6d65  psed_time = time
+000016b0: 2e74 696d 6528 2920 2d20 7365 6c66 2e6c  .time() - self.l
+000016c0: 6f67 5f73 7461 7274 5f74 696d 650a 2020  og_start_time.  
+000016d0: 2020 2020 2020 7365 6c66 2e73 686f 756c        self.shoul
+000016e0: 645f 7365 6e64 203d 2074 696d 652e 7469  d_send = time.ti
+000016f0: 6d65 2829 202d 2073 656c 662e 7374 6172  me() - self.star
+00001700: 745f 7469 6d65 203e 2073 656c 662e 7365  t_time > self.se
+00001710: 6e64 5f61 6674 6572 5f73 6563 6f6e 6473  nd_after_seconds
+00001720: 0a20 2020 2020 2020 2069 6620 656c 6170  .        if elap
+00001730: 7365 645f 7469 6d65 203e 2073 656c 662e  sed_time > self.
+00001740: 7365 6e64 5f70 6572 696f 6473 3a0a 2020  send_periods:.  
+00001750: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00001760: 656e 645f 6c6f 6773 2827 7275 6e6e 696e  end_logs('runnin
+00001770: 6727 290a 0a20 2020 2064 6566 2073 656e  g')..    def sen
+00001780: 645f 656d 6169 6c28 7365 6c66 2c20 7375  d_email(self, su
+00001790: 626a 6563 742c 2062 6f64 792c 2061 7474  bject, body, att
+000017a0: 6163 686d 656e 7473 3d28 2929 3a0a 2020  achments=()):.  
+000017b0: 2020 2020 2020 7365 6e64 6572 203d 2073        sender = s
+000017c0: 656c 662e 636f 6e66 6967 5b27 7365 6e64  elf.config['send
+000017d0: 6572 275d 0a20 2020 2020 2020 2072 6563  er'].        rec
+000017e0: 6569 7665 7273 203d 2073 656c 662e 636f  eivers = self.co
+000017f0: 6e66 6967 5b27 7265 6365 6976 6572 7327  nfig['receivers'
+00001800: 5d0a 2020 2020 2020 2020 7573 6572 6e61  ].        userna
+00001810: 6d65 203d 2073 656c 662e 636f 6e66 6967  me = self.config
+00001820: 5b27 7573 6572 6e61 6d65 275d 0a20 2020  ['username'].   
+00001830: 2020 2020 2070 6173 7377 6f72 6420 3d20       password = 
+00001840: 7365 6c66 2e63 6f6e 6669 675b 2770 6173  self.config['pas
+00001850: 7377 6f72 6427 5d0a 2020 2020 2020 2020  sword'].        
+00001860: 7365 7276 6572 203d 2073 656c 662e 636f  server = self.co
+00001870: 6e66 6967 5b27 7365 7276 6572 275d 0a20  nfig['server']. 
+00001880: 2020 2020 2020 2070 6f72 7420 3d20 7365         port = se
+00001890: 6c66 2e63 6f6e 6669 672e 6765 7428 2770  lf.config.get('p
+000018a0: 6f72 7427 2c30 290a 2020 2020 2020 2020  ort',0).        
+000018b0: 7469 6d65 6f75 7420 3d20 7365 6c66 2e63  timeout = self.c
+000018c0: 6f6e 6669 672e 6765 7428 2774 696d 656f  onfig.get('timeo
+000018d0: 7574 272c 3135 290a 2020 2020 2020 2020  ut',15).        
+000018e0: 746c 7320 3d20 7365 6c66 2e63 6f6e 6669  tls = self.confi
+000018f0: 672e 6765 7428 2774 6c73 272c 4661 6c73  g.get('tls',Fals
+00001900: 6529 0a0a 2020 2020 2020 2020 6d73 6720  e)..        msg 
+00001910: 3d20 4d49 4d45 4d75 6c74 6970 6172 7428  = MIMEMultipart(
+00001920: 290a 2020 2020 2020 2020 6d73 675b 2746  ).        msg['F
+00001930: 726f 6d27 5d20 3d20 7365 6e64 6572 0a20  rom'] = sender. 
+00001940: 2020 2020 2020 206d 7367 5b27 546f 275d         msg['To']
+00001950: 203d 2022 2c20 222e 6a6f 696e 2872 6563   = ", ".join(rec
+00001960: 6569 7665 7273 290a 2020 2020 2020 2020  eivers).        
+00001970: 6d73 675b 2753 7562 6a65 6374 275d 203d  msg['Subject'] =
+00001980: 2073 7562 6a65 6374 0a0a 2020 2020 2020   subject..      
+00001990: 2020 6d73 672e 6174 7461 6368 284d 494d    msg.attach(MIM
+000019a0: 4554 6578 7428 626f 6479 2c20 2768 746d  EText(body, 'htm
+000019b0: 6c27 2069 6620 7365 6c66 2e68 746d 6c20  l' if self.html 
+000019c0: 656c 7365 2027 706c 6169 6e27 2929 0a0a  else 'plain'))..
+000019d0: 2020 2020 2020 2020 666f 7220 6174 7461          for atta
+000019e0: 6368 5f6e 616d 652c 6174 7461 6368 5f64  ch_name,attach_d
+000019f0: 6174 6120 696e 2061 7474 6163 686d 656e  ata in attachmen
+00001a00: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
+00001a10: 6174 7461 6368 6d65 6e74 5f70 6172 7420  attachment_part 
+00001a20: 3d20 4d49 4d45 4170 706c 6963 6174 696f  = MIMEApplicatio
+00001a30: 6e28 6174 7461 6368 5f64 6174 612c 204e  n(attach_data, N
+00001a40: 616d 653d 6174 7461 6368 5f6e 616d 6529  ame=attach_name)
+00001a50: 0a20 2020 2020 2020 2020 2020 2061 7474  .            att
+00001a60: 6163 686d 656e 745f 7061 7274 5b27 436f  achment_part['Co
+00001a70: 6e74 656e 742d 4469 7370 6f73 6974 696f  ntent-Dispositio
+00001a80: 6e27 5d20 3d20 6627 6174 7461 6368 6d65  n'] = f'attachme
+00001a90: 6e74 3b20 6669 6c65 6e61 6d65 3d22 7b61  nt; filename="{a
+00001aa0: 7474 6163 685f 6e61 6d65 7d22 270a 2020  ttach_name}"'.  
+00001ab0: 2020 2020 2020 2020 2020 6d73 672e 6174            msg.at
+00001ac0: 7461 6368 2861 7474 6163 686d 656e 745f  tach(attachment_
+00001ad0: 7061 7274 290a 0a20 2020 2020 2020 2073  part)..        s
+00001ae0: 6d74 705f 7365 7276 6572 203d 2073 6d74  mtp_server = smt
+00001af0: 706c 6962 2e53 4d54 5028 7365 7276 6572  plib.SMTP(server
+00001b00: 2c20 706f 7274 2c74 696d 656f 7574 3d74  , port,timeout=t
+00001b10: 696d 656f 7574 290a 2020 2020 2020 2020  imeout).        
+00001b20: 6966 2074 6c73 3a0a 2020 2020 2020 2020  if tls:.        
+00001b30: 2020 2020 736d 7470 5f73 6572 7665 722e      smtp_server.
+00001b40: 7374 6172 7474 6c73 2829 0a20 2020 2020  starttls().     
+00001b50: 2020 2073 6d74 705f 7365 7276 6572 2e6c     smtp_server.l
+00001b60: 6f67 696e 2875 7365 726e 616d 652c 2070  ogin(username, p
+00001b70: 6173 7377 6f72 6429 0a20 2020 2020 2020  assword).       
+00001b80: 2073 6d74 705f 7365 7276 6572 2e73 656e   smtp_server.sen
+00001b90: 646d 6169 6c28 7365 6e64 6572 2c20 7265  dmail(sender, re
+00001ba0: 6365 6976 6572 732c 206d 7367 2e61 735f  ceivers, msg.as_
+00001bb0: 7374 7269 6e67 2829 290a 2020 2020 2020  string()).      
+00001bc0: 2020 736d 7470 5f73 6572 7665 722e 7175    smtp_server.qu
+00001bd0: 6974 2829 0a0a 2020 2020 6465 6620 7365  it()..    def se
+00001be0: 6e64 5f6c 6f67 7328 7365 6c66 2c20 7374  nd_logs(self, st
+00001bf0: 6174 7573 3d27 2729 3a0a 2020 2020 2020  atus=''):.      
+00001c00: 2020 6966 206e 6f74 2073 656c 662e 7368    if not self.sh
+00001c10: 6f75 6c64 5f73 656e 643a 0a20 2020 2020  ould_send:.     
+00001c20: 2020 2020 2020 2072 6574 7572 6e0a 2020         return.  
+00001c30: 2020 2020 2020 7365 6c66 2e5f 5f73 7464        self.__std
+00001c40: 6572 725f 5f2e 7772 6974 6528 2723 6175  err__.write('#au
+00001c50: 746f 7365 6e64 3a20 7365 6e64 696e 6720  tosend: sending 
+00001c60: 6c6f 675c 6e27 290a 2020 2020 2020 2020  log\n').        
+00001c70: 7365 6c66 2e5f 5f73 7464 6572 725f 5f2e  self.__stderr__.
+00001c80: 666c 7573 6828 290a 0a20 2020 2020 2020  flush()..       
+00001c90: 2074 6578 745f 6c69 6e65 7320 3d20 7369   text_lines = si
+00001ca0: 6d75 6c61 7465 5f74 6572 6d69 6e61 6c5f  mulate_terminal_
+00001cb0: 6f75 7470 7574 2873 656c 662e 6275 6666  output(self.buff
+00001cc0: 6572 2e67 6574 7661 6c75 6528 2929 0a20  er.getvalue()). 
+00001cd0: 2020 2020 2020 2069 6620 7365 6c66 2e63         if self.c
+00001ce0: 6c65 6172 5f61 6674 6572 5f73 656e 643a  lear_after_send:
+00001cf0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00001d00: 662e 6275 6666 6572 203d 2053 7472 696e  f.buffer = Strin
+00001d10: 6749 4f28 2920 0a20 2020 2020 2020 2073  gIO() .        s
+00001d20: 656c 662e 6c6f 675f 7374 6172 745f 7469  elf.log_start_ti
+00001d30: 6d65 203d 2074 696d 652e 7469 6d65 2829  me = time.time()
+00001d40: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+00001d50: 2020 2020 2020 2020 2020 7375 626a 6563            subjec
+00001d60: 7420 3d20 7365 6c66 2e73 626a 5f66 6d74  t = self.sbj_fmt
+00001d70: 2e66 6f72 6d61 7428 0a20 2020 2020 2020  .format(.       
+00001d80: 2020 2020 2020 2020 2070 6174 683d 7365           path=se
+00001d90: 6c66 2e70 6174 682c 0a20 2020 2020 2020  lf.path,.       
+00001da0: 2020 2020 2020 2020 2063 7572 7469 6d65           curtime
+00001db0: 3d73 656c 662e 7374 6172 745f 7469 6d65  =self.start_time
+00001dc0: 5f73 7472 2c0a 2020 2020 2020 2020 2020  _str,.          
+00001dd0: 2020 2020 2020 7374 6174 7573 203d 2073        status = s
+00001de0: 7461 7475 732c 0a20 2020 2020 2020 2020  tatus,.         
+00001df0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00001e00: 206d 6574 615f 696e 666f 3d5b 0a20 2020   meta_info=[.   
+00001e10: 2020 2020 2020 2020 2020 2020 2027 2073               ' s
+00001e20: 7461 7274 5f74 696d 653a 2027 202b 2073  tart_time: ' + s
+00001e30: 656c 662e 7374 6172 745f 7469 6d65 5f73  elf.start_time_s
+00001e40: 7472 2c0a 2020 2020 2020 2020 2020 2020  tr,.            
+00001e50: 2020 2020 276c 6173 7420 7570 6461 7465      'last update
+00001e60: 3a20 2720 2b20 7469 6d65 2e73 7472 6674  : ' + time.strft
+00001e70: 696d 6528 2725 592d 256d 2d25 6420 2548  ime('%Y-%m-%d %H
+00001e80: 3a25 4d27 292c 0a20 2020 2020 2020 2020  :%M'),.         
+00001e90: 2020 2020 2020 2027 2020 2077 6f72 6b5f         '   work_
+00001ea0: 6469 723a 2027 202b 2073 656c 662e 6377  dir: ' + self.cw
+00001eb0: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
+00001ec0: 2020 2027 2020 2020 2020 2061 7267 733a     '       args:
+00001ed0: 2027 202b 2073 656c 662e 6172 6773 2c0a   ' + self.args,.
+00001ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001ef0: 273d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  '===============
+00001f00: 3d3d 206c 6173 7420 3130 3020 6c69 6e65  == last 100 line
+00001f10: 7320 6f66 2074 6865 206c 6f67 203d 3d3d  s of the log ===
+00001f20: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 270a  =============='.
+00001f30: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
+00001f40: 2020 2020 2020 2020 2020 626f 6479 3d6c            body=l
+00001f50: 696e 6573 5f74 6f5f 7465 7874 286d 6574  ines_to_text(met
+00001f60: 615f 696e 666f 202b 2074 6578 745f 6c69  a_info + text_li
+00001f70: 6e65 735b 2d31 3030 3a5d 2c70 6c61 696e  nes[-100:],plain
+00001f80: 3d6e 6f74 2073 656c 662e 6874 6d6c 290a  =not self.html).
+00001f90: 2020 2020 2020 2020 2020 2020 6174 7461              atta
+00001fa0: 6368 6d65 6e74 7320 3d20 5b28 6622 6c6f  chments = [(f"lo
+00001fb0: 6773 5f7b 7469 6d65 2e73 7472 6674 696d  gs_{time.strftim
+00001fc0: 6528 2725 592d 256d 2d25 642d 2548 2d25  e('%Y-%m-%d-%H-%
+00001fd0: 4d27 297d 2e74 7874 222c 2027 5c6e 272e  M')}.txt", '\n'.
+00001fe0: 6a6f 696e 2874 6578 745f 6c69 6e65 7329  join(text_lines)
+00001ff0: 295d 0a20 2020 2020 2020 2020 2020 2073  )].            s
+00002000: 656c 662e 7365 6e64 5f65 6d61 696c 2873  elf.send_email(s
+00002010: 7562 6a65 6374 2c20 626f 6479 2c20 6174  ubject, body, at
+00002020: 7461 6368 6d65 6e74 7329 0a0a 2020 2020  tachments)..    
+00002030: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+00002040: 7469 6f6e 3a0a 2020 2020 2020 2020 2020  tion:.          
+00002050: 2020 7365 6c66 2e5f 5f73 7464 6572 725f    self.__stderr_
+00002060: 5f2e 7772 6974 6528 2723 6175 746f 7365  _.write('#autose
+00002070: 6e64 3a20 656d 6169 6c20 7365 6e64 696e  nd: email sendin
+00002080: 6720 6661 696c 6564 3a5c 6e27 290a 2020  g failed:\n').  
+00002090: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+000020a0: 5f73 7464 6572 725f 5f2e 7772 6974 6528  _stderr__.write(
+000020b0: 7472 6163 6562 6163 6b2e 666f 726d 6174  traceback.format
+000020c0: 5f65 7863 2829 290a 2020 2020 2020 2020  _exc()).        
+000020d0: 2020 2020 7365 6c66 2e5f 5f73 7464 6572      self.__stder
+000020e0: 725f 5f2e 666c 7573 6828 290a 0a20 2020  r__.flush()..   
+000020f0: 2064 6566 205f 5f64 656c 5f5f 2873 656c   def __del__(sel
+00002100: 6629 3a0a 2020 2020 2020 2020 6966 206e  f):.        if n
+00002110: 6f74 2073 656c 662e 656e 6162 6c65 643a  ot self.enabled:
+00002120: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00002130: 7572 6e0a 2020 2020 2020 2020 7365 6c66  urn.        self
+00002140: 2e65 6e61 626c 6564 3d46 616c 7365 0a20  .enabled=False. 
+00002150: 2020 2020 2020 2073 656c 662e 7365 6e64         self.send
+00002160: 5f6c 6f67 7328 2763 6f6d 706c 6574 6564  _logs('completed
+00002170: 2729 0a20 2020 2020 2020 2073 7973 2e73  ').        sys.s
+00002180: 7464 6f75 7420 3d20 7365 6c66 2e5f 5f73  tdout = self.__s
+00002190: 7464 6f75 745f 5f0a 2020 2020 2020 2020  tdout__.        
+000021a0: 7379 732e 7374 6465 7272 203d 2073 656c  sys.stderr = sel
+000021b0: 662e 5f5f 7374 6465 7272 5f5f 0a0a 6966  f.__stderr__..if
+000021c0: 2069 6e74 286f 732e 656e 7669 726f 6e2e   int(os.environ.
+000021d0: 6765 7428 274c 4f43 414c 5f52 414e 4b27  get('LOCAL_RANK'
+000021e0: 2c6f 732e 656e 7669 726f 6e2e 6765 7428  ,os.environ.get(
+000021f0: 2752 414e 4b27 2c30 2929 293d 3d30 3a0a  'RANK',0)))==0:.
+00002200: 2020 2020 6c6f 6767 6572 203d 2054 6578      logger = Tex
+00002210: 7449 4f57 7261 7070 6572 5769 7468 4c6f  tIOWrapperWithLo
+00002220: 6767 696e 6728 290a 0a                   gging()..
```

## Comparing `Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.9_3.9.3568.0_x64__qbz5n2kfra8p0/Lib/site-packages/autosend-0.0.2-py3.9.egg-info/PKG-INFO` & `autosend-0.0.3.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,23 +1,22 @@
 Metadata-Version: 2.1
 Name: autosend
-Version: 0.0.2
+Version: 0.0.3
 Summary: a simple tool that logs what is printed on the screen, and emails the logs to you
 Home-page: https://github.com/flishwang/autosend
 Author: flish_wang
 Author-email: flish_wang@sina.com
-License: UNKNOWN
-Platform: UNKNOWN
 Classifier: Development Status :: 3 - Alpha
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Operating System :: OS Independent
 Requires-Python: >=3
 Description-Content-Type: text/markdown
 License-File: LICENSE
+Requires-Dist: pyyaml
 
 # Introduction
 This is a tool that logs everything your program printing on the screen, 
 and sends you an email when the program is finished or terminated.
 
 # Usage
 First, create ~/.autosend.yaml using the following 
@@ -44,14 +43,17 @@
 - "example@example.com"
 
 # send logs by email only if the program runs after the specific seconds
 send_after_seconds: 3600
 
 # send logs by email EVERY specific seconds if the program is keep running
 send_periods: 86400
+
+# whether send html format logs instead of plain text
+html: True
 ```
  
 Then add the following line in your code:
 ```
 import autosend
 ```
 
@@ -70,9 +72,7 @@
 Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
 NameError: name 'date' is not defined
 1684043182.6202037
 
 1 attachments
 ```
-
-
```

